(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-06e98ac8"],{"006e":function(t,e,s){},"0e47":function(t,e,s){},"22de":function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[t.stream?s("div",{staticClass:"md-layout md-alignment-center-center"},[""!==t.error?s("div",{staticClass:"md-layout-item md-size-100"},[s("md-content",{staticClass:"md-accent md-caption"},[t._v(t._s(t.error))])],1):t._e(),s("div",{staticClass:"md-layout-item md-size-100"},[s("div",{staticClass:"md-layout xxx-md-gutter md-alignment-center-center"},[s("div",{staticClass:"md-layout-item md-size-50 md-large-size-65 md-medium-size-100"},[s("stream-detail-title",{attrs:{stream:t.stream}}),s("detail-description",{attrs:{resource:t.stream}}),s("br"),s("stream-detail-user-perms",{attrs:{stream:t.stream}}),s("br"),s("stream-detail-network",{attrs:{stream:t.stream}}),s("br"),s("stream-detail-comments",{attrs:{stream:t.stream}}),s("br"),s("stream-detail-history",{attrs:{stream:t.stream}})],1)])])]):s("div",{staticClass:"md-layout md-alignment-center-center",staticStyle:{height:"95vh"}},[s("div",{staticClass:"md-layout-item md-size-50"},[s("md-progress-bar",{attrs:{"md-mode":"indeterminate"}})],1)])])},r=[],i=(s("6762"),s("2fdb"),s("ac6a"),s("7514"),s("cadf"),s("551c"),s("097d"),s("f7fe")),n=s.n(i),c=s("13bb"),d=s.n(c),o=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("md-card",{staticClass:"md-elevation-0"},[s("md-card-content",[s("h1",{staticClass:"md-display-1"},[s("router-link",{attrs:{to:"/streams"}},[t._v("Streams")]),t._v(" / "+t._s(t.stream.name)+"\n    ")],1),s("p",[t._v("\n      streamId: "),s("span",{staticStyle:{"user-select":"all"}},[s("md-chip",{staticClass:"md-accent"},[s("strong",[t._v(t._s(t.stream.streamId))])])],1),t._v(" "),s("br"),t._v(" "),s("br"),t.streamProjects.length>0?s("span",[t._v("projects:\n      "),t._l(t.streamProjects,function(e,a){return s("md-chip",{staticClass:"md-primary",attrs:{"md-clickable":""}},[s("router-link",{staticStyle:{color:"white !important"},attrs:{to:"/projects/"+e._id}},[t._v(t._s(e.name))]),t._v(" \n      ")],1)})],2):t._e()]),s("md-divider"),s("md-chips",{staticClass:"stream-chips",attrs:{"md-placeholder":"add tags","md-disabled":"!canEdit"},on:{input:t.updateTags},model:{value:t.stream.tags,callback:function(e){t.$set(t.stream,"tags",e)},expression:"stream.tags"}}),s("p")],1)],1)},m=[],l={name:"StreamDetailTitle",props:{stream:Object},computed:{canEdit:function(){return!!this.isOwner||-1!==this.stream.canWrite.indexOf(this.$store.state.user._id)},isOwner:function(){return this.stream.owner===this.$store.state.user._id},streamProjects:function(){var t=this;return this.$store.state.projects.filter(function(e){return-1!==e.streams.indexOf(t.stream.streamId)})}},data:function(){return{}},methods:{updateTags:n()(function(t){this.$store.dispatch("updateStream",{streamId:this.stream.streamId,tags:this.stream.tags})},1e3)},mounted:function(){}},u=l,h=(s("ec65"),s("2877")),p=Object(h["a"])(u,o,m,!1,null,"9be36a06",null);p.options.__file="StreamDetailTitle.vue";var v=p.exports,f=s("8450"),_=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("md-card",{staticClass:"md-elevation-3",attrs:{"md-with-hover":""}},[s("md-card-content",{staticClass:"bg-ghost-white"},[s("div",{staticClass:"md-layout md-alignment-center-center"},[s("div",{staticClass:"md-layout-item md-title md-size-70"},[t._v("Link Sharing")]),s("div",{staticClass:"md-layout-item md-title md-size-30 text-right"},[s("md-button",{class:{"md-raised":!0,"md-primary":!t.stream.private},attrs:{disabled:!t.canEdit},nativeOn:{click:function(e){return t.changeLinkSharing(e)}}},[t._v("\n          "+t._s(t.stream.private?"OFF":"ON")+"\n        ")])],1),s("div",{staticClass:"md-layout-item md-size-100 md-caption"},[t._v("\n        "+t._s(t.stream.private?"Private resource. Only people with read or write persmissions can access it.":"Public resource. Anyone with the id can access it.")+"\n        "),t.isOwner?s("span",{staticClass:"md-layout-item md-size-100 md-caption"},[t._v("\n        You own this stream.\n      ")]):s("span",{staticClass:"md-layout-item md-size-100 md-caption"},[t._v("\n        This stream was shared with you by "),s("strong",[t._v(t._s(t.streamOwner)+".")])])])])]),s("md-card-content",{staticClass:"bg-ghost-white"},[s("div",{staticClass:"md-layout"},[s("div",{staticClass:"md-layout-item md-size-100",staticStyle:{"margin-top":"20px"}},[s("div",{staticClass:"md-title"},[t._v("Permissions")]),s("p",{staticClass:"md-caption"},[t._v("Some users might be disabled as their permissions are set through projects.")])])])]),s("md-card-content",[s("div",{staticClass:"md-layout"},[s("div",{staticClass:"md-layout-item md-size-100",staticStyle:{"margin-top":"0px"}},[t.canEdit?s("user-search",{on:{"selected-user":t.addUserToWrite}}):t._e(),s("permission-table",{attrs:{resource:t.stream},on:{"update-table":t.updatePerms}})],1)])])],1)},b=[],C=s("2909"),g=(s("7f7f"),s("c36e")),w=s.n(g),y=(s("bc3a"),s("6ec6")),O=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("div",{},[0===t.allUsersPop.length?s("div",[t._v("\n      No sharing buddies so far!\n    ")]):t._e(),t._l(t.allUsersPop,function(e){return e?s("div",{staticClass:"md-layout md-alignment-center-left user"},[s("div",{staticClass:"md-layout-item md-size-10"},[s("md-avatar",{staticClass:"md-avatar-icon md-small"},[t._v(t._s(e.name.substring(0,1).toUpperCase()))])],1),s("div",{staticClass:"md-layout-item md-size-40"},[t._v("\n        "+t._s(e.name)+" "+t._s(e.surname)+" "),e.company?s("span",{staticClass:"md-caption"},[t._v("("+t._s(e.company)+")")]):t._e()]),s("div",{staticClass:"md-layout-item text-right"},[s("md-button",{class:{"md-dense md-raised":!0,"md-primary":t.hasWritePermission(e._id)},attrs:{disabled:e.surname.includes("(that is you!)")||t.globalDisabled},nativeOn:{click:function(s){t.changePermission(e._id)}}},[t._v(t._s(t.hasWritePermission(e._id)?"write":"read"))]),s("md-button",{staticClass:"md-dense-xxx md-icon-button md-accent",attrs:{disabled:e.surname.includes("(that is you!)")||t.globalDisabled},nativeOn:{click:function(s){t.removeUser(e._id)}}},[s("md-icon",[t._v("delete")])],1)],1)]):t._e()})],2)])},$=[],S={name:"PermissionTable",props:{resource:Object,globalDisabled:{type:Boolean,default:!1}},computed:{canRead:function(){return this.resource.canRead},canWrite:function(){return this.resource.canWrite},allUsers:function(){return d()(this.canRead,this.canWrite)},allUsersPop:function(){var t=this;return 0===this.allUsers.length?[]:this.allUsers.map(function(e){var s=t.$store.state.users.find(function(t){return t._id===e});return s||t.$store.dispatch("getUser",{_id:e}),s})}},data:function(){return{}},methods:{hasWritePermission:function(t){return this.canWrite.indexOf(t)>-1},changePermission:function(t){var e=[],s=this.canWrite.indexOf(t);s>-1?(e=this.canWrite.filter(function(e){return e!==t}),w()(Object(C["a"])(this.canRead).concat([t]))):e=w()(Object(C["a"])(this.canWrite).concat([t])),this.$emit("update-table",{canRead:this.canRead,canWrite:e})},removeUser:function(t){var e=this.canWrite.filter(function(e){return e!==t}),s=this.canRead.filter(function(e){return e!==t});this.$emit("remove-user",{userId:t}),this.$emit("update-table",{canRead:s,canWrite:e})}},mounted:function(){}},x=S,I=(s("c27b"),Object(h["a"])(x,O,$,!1,null,"07340b40",null));I.options.__file="PermissionTable.vue";var W=I.exports,D={name:"StreamDetailUserPerms",components:{UserSearch:y["a"],PermissionTable:W},props:{stream:Object},computed:{streamOwner:function(){var t=this;if(this.isOwner)return"".concat(this.$store.state.user.name," ").concat(this.$store.state.user.surname);var e=this.$store.state.users.find(function(e){return e._id===t.stream.owner});return e?"".concat(e.name," ").concat(e.surname," ").concat(e.company?"("+e.company+")":""):"(loading)"},canEdit:function(){return!!this.isOwner||-1!==this.stream.canWrite.indexOf(this.$store.state.user._id)},isOwner:function(){return this.stream.owner===this.$store.state.user._id}},data:function(){return{userSearch:"",foundUsers:[],searchInProgress:!1}},methods:{changeLinkSharing:function(){this.$store.dispatch("updateStream",{streamId:this.stream.streamId,private:!this.stream.private})},addUserToWrite:function(t){var e=w()(Object(C["a"])(this.stream.canWrite).concat([t]));this.$store.dispatch("updateStream",{streamId:this.stream.streamId,canWrite:e})},updatePerms:function(t){var e=t.canRead,s=t.canWrite;this.$store.dispatch("updateStream",{streamId:this.stream.streamId,canRead:e,canWrite:s})}}},P=D,j=(s("e558"),Object(h["a"])(P,_,b,!1,null,"2ba7d1ed",null));j.options.__file="StreamDetailUserPerms.vue";var U=j.exports,k=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("md-card",{staticClass:"md-elevation-3",attrs:{"md-with-hover":""}},[s("md-card-header",{staticClass:"bg-ghost-white"},[s("md-card-header-text",[s("div",{staticClass:"md-title"},[s("md-icon",[t._v("share")]),t._v(" Connectivity")],1),s("div",{staticClass:"md-caption"},[t._v("Where this stream is received and sent from.")])])],1),s("md-card-content",[s("br"),t._l(t.clients,function(t){return s("client-card",{key:t._id,attrs:{client:t}})})],2)],1)},E=[],z=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"md-layout client md-alignment-center-center"},[s("div",{staticClass:"md-layout-item md-size-10"},[s("md-icon",{class:{blue:"cloud_upload"===t.icon}},[t._v(t._s(t.icon))])],1),s("div",{staticClass:"md-layout-item md-caption"},[t._v("\n    "+t._s(t.client.documentType)+" "),t.client.documentName?s("span",[t._v("doc: "+t._s(t.client.documentName))]):t._e()]),s("div",{staticClass:"md-layout-item md-caption"},[t._v(" last seen: "),s("strong",[s("timeago",{attrs:{datetime:t.client.updatedAt}})],1)]),s("div",{staticClass:"md-layout-item md-caption"},[t.owner?s("span",[t._v(t._s(t.owner.name)+" "+t._s(t.owner.surname))]):t._e()])])},T=[],R={name:"ClientCard",props:{client:Object},computed:{owner:function(){var t=this,e=this.$store.state.users.find(function(e){return e._id===t.client.owner});return e||this.$store.dispatch("getUser",{_id:this.client.owner}),e},icon:function(){return"sender"===this.client.role.toLowerCase()?"cloud_upload":"receiver"===this.client.role.toLowerCase()?"cloud_download":"hearing"}},data:function(){return{}},methods:{}},N=R,L=(s("a79a"),Object(h["a"])(N,z,T,!1,null,"06cf13ef",null));L.options.__file="ClientCard.vue";var H=L.exports,K={name:"StreamDetailNetwork",components:{ClientCard:H},props:{stream:Object},watch:{stream:function(t,e){console.log("wathc",t),this.fetchData()}},computed:{canEdit:function(){return!!this.isOwner||-1!==this.stream.canWrite.indexOf(this.$store.state.user._id)},isOwner:function(){return this.stream.owner===this.$store.state.user._id},clients:function(){return this.$store.getters.streamClients(this.stream.streamId)}},methods:{fetchData:function(){this.$store.dispatch("getStreamClients",{streamId:this.stream.streamId})}},created:function(){this.fetchData()}},A=K,F=(s("aea9"),Object(h["a"])(A,k,E,!1,null,"68888742",null));F.options.__file="StreamDetailNetwork.vue";var J=F.exports,B=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("md-card",{staticClass:"md-elevation-3",attrs:{"md-with-hover":""}},[s("md-card-header",{staticClass:"bg-ghost-white"},[s("md-card-header-text",[s("div",{staticClass:"md-title"},[t._v("History")]),s("div",{staticClass:"md-caption"},[t._v("This stream's children and parents, if any.")])])],1),s("md-card",{staticClass:"md-elevation-0"},[s("md-card-content",[s("div",{staticClass:"md-title"},[t._v("Parent")])])],1),t.stream.parent?s("stream-card-small",{attrs:{"stream-id":t.stream.parent,removable:!1}}):s("md-card",{staticClass:"md-elevation-0"},[s("md-card-content",[s("div",{staticClass:"md-caption"},[t._v("This stream is a parent stream.")])])],1),s("md-card",{staticClass:"md-elevation-0"},[s("md-card-content",[s("div",{staticClass:"md-title"},[t._v("Children "),s("span",{staticClass:"md-caption"},[t._v("("+t._s(t.stream.children.length)+")")])])])],1),0===t.stream.children.length?s("md-card",{staticClass:"md-elevation-0"},[s("md-card-content",[s("div",{staticClass:"md-caption"},[t._v("This stream has no children.")])])],1):t._e(),t._l(t.paginatedKids,function(t){return s("stream-card-small",{key:t,attrs:{"stream-id":t,removable:!1}})}),s("br"),s("div",{staticClass:"text-center",staticStyle:{"padding-bottom":"5px"}},[s("md-button",{staticClass:"md-raised md-primary",attrs:{disabled:t.paginatedKids.length===t.stream.children.length},nativeOn:{click:function(e){t.endIndex+=5}}},[t._v("\n      Show More ("+t._s(t.paginatedKids.length)+" / "+t._s(t.stream.children.length)+")\n    ")])],1)],2)},M=[],V=s("adc7"),Y={name:"StreamDetailUserHistory",components:{StreamCardSmall:V["a"]},props:{stream:Object},computed:{paginatedKids:function(){return this.stream.children.slice(this.startIndex,this.endIndex)},canEdit:function(){return!!this.isOwner||-1!==this.stream.canWrite.indexOf(this.$store.state.user._id)},isOwner:function(){return this.stream.owner===this.$store.state.user._id}},data:function(){return{startIndex:0,itemsPerPage:5,endIndex:5}},methods:{}},q=Y,G=(s("d784"),Object(h["a"])(q,B,M,!1,null,"6031dea0",null));G.options.__file="StreamDetailHistory.vue";var Q=G.exports,X=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("md-card",{staticClass:"md-elevation-3"},[s("md-card-content",[s("div",{staticClass:"md-title"},[t._v("Comments")]),s("md-divider",{attrs:{"md-inset":""}}),s("p",[t._v("TODO")])],1)],1)},Z=[],tt={name:"StreamDetailUserComments",props:{stream:Object},computed:{canEdit:function(){return!!this.isOwner||-1!==this.stream.canWrite.indexOf(this.$store.state.user._id)},isOwner:function(){return this.stream.owner===this.$store.state.user._id}},methods:{}},et=tt,st=(s("e84e"),Object(h["a"])(et,X,Z,!1,null,"43af536a",null));st.options.__file="StreamDetailComments.vue";var at=st.exports,rt={name:"StreamDetailView",components:{StreamDetailTitle:v,DetailDescription:f["a"],StreamDetailUserPerms:U,StreamDetailNetwork:J,StreamDetailHistory:Q,StreamDetailComments:at},computed:{stream:function(){var t=this,e=this.$store.state.streams.find(function(e){return e.streamId===t.$route.params.streamId});return e},canEdit:function(){return!!this.isOwner||-1!==this.stream.canWrite.indexOf(this.$store.state.user._id)},isOwner:function(){return this.stream.owner===this.$store.state.user._id}},data:function(){return{error:"",editDescription:!1}},methods:{},mounted:function(){var t=this,e=this.$store.state.streams.find(function(e){return e.streamId===t.$route.params.streamId});e?(this.$store.dispatch("getUser",{_id:e.owner}),d()(e.canRead,e.canWrite).forEach(function(e){return t.$store.dispatch("getUser",{_id:e})})):this.$store.dispatch("getStream",{streamId:this.$route.params.streamId}).then(function(e){t.$store.dispatch("getUser",{_id:e.data.resource.owner}),d()(e.data.resource.canRead,e.data.resource.canWrite).forEach(function(e){return t.$store.dispatch("getUser",{_id:e})})}).catch(function(e){e.message.includes("404")&&(t.error="Stream ".concat(t.$route.params.streamId," was not found.")),e.message.includes("401")&&(t.error="Stream ".concat(t.$route.params.streamId," is not accessible to you due to its protection level."))})}},it=rt,nt=(s("d74c"),Object(h["a"])(it,a,r,!1,null,"25da13d7",null));nt.options.__file="StreamDetail.vue";e["default"]=nt.exports},"2d18":function(t,e,s){},"61e6":function(t,e,s){},a01d:function(t,e,s){},a79a:function(t,e,s){"use strict";var a=s("0e47"),r=s.n(a);r.a},aea9:function(t,e,s){"use strict";var a=s("a01d"),r=s.n(a);r.a},b2bc:function(t,e,s){},b499:function(t,e,s){},c27b:function(t,e,s){"use strict";var a=s("61e6"),r=s.n(a);r.a},d74c:function(t,e,s){"use strict";var a=s("e099"),r=s.n(a);r.a},d784:function(t,e,s){"use strict";var a=s("b499"),r=s.n(a);r.a},e099:function(t,e,s){},e558:function(t,e,s){"use strict";var a=s("b2bc"),r=s.n(a);r.a},e84e:function(t,e,s){"use strict";var a=s("2d18"),r=s.n(a);r.a},ec65:function(t,e,s){"use strict";var a=s("006e"),r=s.n(a);r.a}}]);
//# sourceMappingURL=chunk-06e98ac8.b25c017a.js.map