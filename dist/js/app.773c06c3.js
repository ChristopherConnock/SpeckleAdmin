(function(e){function t(t){for(var r,o,u=t[0],i=t[1],s=t[2],f=0,l=[];f<u.length;f++)o=u[f],a[o]&&l.push(a[o][0]),a[o]=0;for(r in i)Object.prototype.hasOwnProperty.call(i,r)&&(e[r]=i[r]);d&&d(t);while(l.length)l.shift()();return c.push.apply(c,s||[]),n()}function n(){for(var e,t=0;t<c.length;t++){for(var n=c[t],r=!0,o=1;o<n.length;o++){var u=n[o];0!==a[u]&&(r=!1)}r&&(c.splice(t--,1),e=i(i.s=n[0]))}return e}var r={},o={app:0},a={app:0},c=[];function u(e){return i.p+"js/"+({}[e]||e)+"."+{"chunk-042a9225":"e4ceb235","chunk-711e8a93":"753031d5","chunk-7bc0f01f":"65623689","chunk-8ed778b6":"2ccc571d","chunk-55908ede":"a327d92c","chunk-06e98ac8":"b25c017a","chunk-4c2eeb40":"d8f7f95b","chunk-55dc5437":"f3c87f02","chunk-d0ba7ae6":"7b62f255","chunk-f99ea9a2":"4eda5208"}[e]+".js"}function i(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.e=function(e){var t=[],n={"chunk-042a9225":1,"chunk-711e8a93":1,"chunk-7bc0f01f":1,"chunk-55908ede":1,"chunk-06e98ac8":1,"chunk-4c2eeb40":1,"chunk-55dc5437":1,"chunk-d0ba7ae6":1,"chunk-f99ea9a2":1};o[e]?t.push(o[e]):0!==o[e]&&n[e]&&t.push(o[e]=new Promise(function(t,n){for(var r="css/"+({}[e]||e)+"."+{"chunk-042a9225":"0e433876","chunk-711e8a93":"4eab9071","chunk-7bc0f01f":"4eab9071","chunk-8ed778b6":"31d6cfe0","chunk-55908ede":"f548ed5a","chunk-06e98ac8":"bb83b382","chunk-4c2eeb40":"b284e3f4","chunk-55dc5437":"67835c23","chunk-d0ba7ae6":"27d245c4","chunk-f99ea9a2":"0e433876"}[e]+".css",a=i.p+r,c=document.getElementsByTagName("link"),u=0;u<c.length;u++){var s=c[u],f=s.getAttribute("data-href")||s.getAttribute("href");if("stylesheet"===s.rel&&(f===r||f===a))return t()}var l=document.getElementsByTagName("style");for(u=0;u<l.length;u++){s=l[u],f=s.getAttribute("data-href");if(f===r||f===a)return t()}var d=document.createElement("link");d.rel="stylesheet",d.type="text/css",d.onload=t,d.onerror=function(t){var r=t&&t.target&&t.target.src||a,c=new Error("Loading CSS chunk "+e+" failed.\n("+r+")");c.request=r,delete o[e],d.parentNode.removeChild(d),n(c)},d.href=a;var m=document.getElementsByTagName("head")[0];m.appendChild(d)}).then(function(){o[e]=0}));var r=a[e];if(0!==r)if(r)t.push(r[2]);else{var c=new Promise(function(t,n){r=a[e]=[t,n]});t.push(r[2]=c);var s,f=document.getElementsByTagName("head")[0],l=document.createElement("script");l.charset="utf-8",l.timeout=120,i.nc&&l.setAttribute("nonce",i.nc),l.src=u(e),s=function(t){l.onerror=l.onload=null,clearTimeout(d);var n=a[e];if(0!==n){if(n){var r=t&&("load"===t.type?"missing":t.type),o=t&&t.target&&t.target.src,c=new Error("Loading chunk "+e+" failed.\n("+r+": "+o+")");c.type=r,c.request=o,n[1](c)}a[e]=void 0}};var d=setTimeout(function(){s({type:"timeout",target:l})},12e4);l.onerror=l.onload=s,f.appendChild(l)}return Promise.all(t)},i.m=e,i.c=r,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)i.d(n,r,function(t){return e[t]}.bind(null,r));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="/",i.oe=function(e){throw console.error(e),e};var s=window["webpackJsonp"]=window["webpackJsonp"]||[],f=s.push.bind(s);s.push=t,s=s.slice();for(var l=0;l<s.length;l++)t(s[l]);var d=f;c.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},1351:function(e,t,n){"use strict";var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("md-list",[n("md-list-item",{attrs:{to:"/streams"}},[n("md-icon",[e._v("import_export")]),n("span",{staticClass:"md-list-item-text"},[e._v("Streams")])],1),n("md-list-item",{attrs:{to:"/projects"}},[n("md-icon",[e._v("business")]),n("span",{staticClass:"md-list-item-text"},[e._v("Projects")])],1),n("md-list-item",{attrs:{to:"/profile"}},[n("md-icon",[e._v("account_circle")]),n("span",{staticClass:"md-list-item-text"},[e._v("Profile")])],1)],1)},o=[];n.d(t,"a",function(){return r}),n.d(t,"b",function(){return o})},"39e5":function(e,t,n){"use strict";var r=n("82c8"),o=n.n(r);o.a},"56d7":function(e,t,n){"use strict";n.r(t);n("cadf"),n("551c"),n("097d");var r=n("2b0e"),o=n("bc3a"),a=n.n(o),c=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"app"}},[n("md-button",{directives:[{name:"show",rawName:"v-show",value:e.$store.state.isAuth,expression:"$store.state.isAuth"}],staticClass:"md-fab md-plain md-primary md-fab-bottom-left md-fixed",staticStyle:{"z-index":"10000"},on:{click:function(t){e.showSidebar=!e.showSidebar}}},[n("md-icon",[e._v(e._s(e.showSidebar?"close":"menu"))])],1),n("md-app",{attrs:{"md-waterfall":""}},[n("md-app-drawer",{directives:[{name:"show",rawName:"v-show",value:e.$store.state.isAuth&&e.showSidebar,expression:"$store.state.isAuth && showSidebar"}],staticClass:"md-primary xxx-md-elevation-10 nav-sidebar",attrs:{"md-active":e.showSidebar,"md-permanent":"clipped"}},[n("nav-drawer")],1),n("md-app-content",[n("keep-alive",{attrs:{exclude:"StreamDetailView"}},[n("router-view")],1)],1)],1)],1)},u=[],i=n("cc44"),s={name:"MainApp",components:{NavDrawer:i["default"]},data:function(e){return{showSidebar:!0}},created:function(){this.$store.state.isAuth&&(this.$store.dispatch("getStreams","omit=objects,layers&isComputedResult=false&deleted=false&sort=-lastModified"),this.$store.dispatch("getProjects"))}},f=s,l=(n("5c0b"),n("2877")),d=Object(l["a"])(f,c,u,!1,null,null,null);d.options.__file="App.vue";var m=d.exports,h=n("8c4f"),p=(n("456d"),n("7514"),n("20d6"),n("7f7f"),n("6762"),n("2fdb"),n("28a5"),n("6b54"),n("ac6a"),n("2f62"));n("c36e");r["default"].use(p["a"]);var v=new p["a"].Store({state:{server:null,serverManifest:{serverName:null,api:null,version:null},token:null,user:{},isAuth:!1,streams:[],clients:[],projects:[],comments:[],users:[]},getters:{streamClients:function(e){return function(t){return e.clients.filter(function(e){return e.streamId===t})}},filteredStreams:function(e){return function(t){var n=e.streams.filter(function(e){return null==e.parent&&!1===e.deleted});return t&&0!==t.length?(t.forEach(function(t){switch(t.key=t.key.toLowerCase(),t.key){case"private":n=t.value?n.filter(function(e){return e.private.toString()===t.value}):n.filter(function(e){return!0===e.private});break;case"public":n=t.value?n.filter(function(e){return(!e.private).toString()===t.value}):n.filter(function(e){return!1===e.private});break;case"tag":case"tags":var r=t.value.split(",").map(function(e){return e.toLowerCase()});n=n.filter(function(e){var t=e.tags.map(function(e){return e.toLowerCase()});return r.every(function(e){return t.includes(e)})});break;case"mine":n=n.filter(function(t){return t.owner===e.user._id});break;case"shared":n=n.filter(function(t){return t.owner!==e.user._id});break;case"name":n=n.filter(function(e){return e.name.toLowerCase().includes(t.value.toLowerCase())});break;case"streamid":case"id":n=n.filter(function(e){return e.streamId.toLowerCase().includes(t.value.toLowerCase())});break}}),n):n}}},mutations:{ADD_STREAMS:function(e,t){t.forEach(function(t){-1===e.streams.findIndex(function(e){return e.streamId===t.streamId})&&(t.description||(t.description="..."),t.tags||(t.tags=[]),e.streams.unshift(t))})},UPDATE_STREAM:function(e,t){var n=e.streams.find(function(e){return e.streamId===t.streamId});Object.keys(t).forEach(function(e){n[e]=t[e]})},REMOVE_STREAM:function(e,t){},ADD_CLIENTS:function(e,t){t.forEach(function(t){-1===e.clients.findIndex(function(e){return e._id===t._id})&&e.clients.push(t)})},ADD_PROJECTS:function(e,t){t.forEach(function(t){-1===e.projects.findIndex(function(e){return e._id===t._id})&&(t.tags||(t.tags=[]),e.projects.unshift(t))})},UPDATE_PROJECT:function(e,t){var n=e.projects.find(function(e){return e._id===t._id});Object.keys(t).forEach(function(e){n[e]=t[e]})},ADD_USER:function(e,t){var n=e.users.find(function(e){return e._id===t._id});n?n=t:e.users.unshift(t)},ADD_USERS:function(e,t){t.forEach(function(t){var n=e.users.find(function(e){return e._id===t._id});n?n=t:e.users.unshift(t)})},SET_SERVER:function(e,t){e.server=t},SET_SERVER_DETAILS:function(e,t){e.serverManifest=t},SET_TOKEN:function(e,t){e.token=t,e.isAuth=!0},SET_USER:function(e,t){e.user=t},FLUSH_ALL:function(e){e.token=null,e.user={},e.streams=[],e.projects=[],e.clients=[],e.users=[],e.comments=[],e.isAuth=!1}},actions:{getStream:function(e,t){return new Promise(function(n,r){var o=e.state.streams.find(function(e){return e.streamId===t.streamId});if(o)return n(o);a.a.get("streams/".concat(t.streamId,"?omit=objects")).then(function(t){return e.commit("ADD_STREAMS",[t.data.resource]),n(t)}).catch(function(e){return r(e)})})},getStreams:function(e,t){return new Promise(function(n,r){a.a.get("streams?".concat(t||"")).then(function(t){return e.commit("ADD_STREAMS",t.data.resources),n(t.data.resources)}).catch(function(e){return console.log(e),r(e)})})},updateStream:function(e,t){a.a.put("streams/".concat(t.streamId),t).then(function(n){e.commit("UPDATE_STREAM",t)}).catch(function(e){console.warn(e)})},getStreamClients:function(e,t){a.a.get("streams/".concat(t.streamId,"/clients")).then(function(t){e.commit("ADD_CLIENTS",t.data.resources)}).catch(function(e){console.log(e)})},deleteStream:function(e,t){},getProject:function(e,t){return new Promise(function(n,r){a.a.get("projects/".concat(t._id)).then(function(t){return e.commit("ADD_PROJECTS",[t.data.resource]),n(t)}).catch(function(e){return console.error(e),r(e)})})},getProjects:function(e,t){return new Promise(function(n,r){a.a.get("projects?".concat(t||"")).then(function(t){return e.commit("ADD_PROJECTS",t.data.resources),n(t.data.resources)}).catch(function(e){return console.log(e),r(e)})})},createProject:function(e){return new Promise(function(t,n){a.a.post("projects",{name:"A Speckle Project"}).then(function(n){return e.commit("ADD_PROJECTS",[n.data.resource]),t(n.data.resource)}).catch(function(e){return console.log(e),n(e)})})},updateProject:function(e,t){a.a.put("projects/".concat(t._id),t).then(function(n){e.commit("UPDATE_PROJECT",t)}).catch(function(e){console.warn(e)})},getUser:function(e,t){return new Promise(function(n,r){var o=e.state.users.find(function(e){return e._id===t._id});if(o)return n(o);a.a.get("accounts/".concat(t._id)).then(function(r){return e.state.user._id===t._id&&(r.data.resource.surname+=" (that is you!)"),e.commit("ADD_USER",r.data.resource),n(r.data.resource)}).catch(function(e){return r(e)})})},login:function(e,t){return new Promise(function(n,r){a.a.post("accounts/login",{email:t.email,password:t.password}).then(function(t){return e.commit("SET_TOKEN",t.data.resource.token),e.commit("SET_USER",t.data.resource),localStorage.setItem("token",t.data.resource.token),a.a.defaults.headers.common["Authorization"]=t.data.resource.token,n(t.data.resource)}).catch(function(e){return r(e)})})},logout:function(e,t){e.commit("FLUSH_ALL"),localStorage.removeItem("token"),a.a.defaults.headers.common["Authorization"]=""}}});r["default"].use(h["a"]);var b=new h["a"]({linkExactActiveClass:"is-active",routes:[{path:"/",name:"dashboard",component:function(){return n.e("chunk-f99ea9a2").then(n.bind(null,"7277"))},meta:{requiresAuth:!0}},{path:"/login/:redirectTo?",name:"login",component:function(){return n.e("chunk-7bc0f01f").then(n.bind(null,"a55b"))}},{path:"/register",name:"register",component:function(){return n.e("chunk-711e8a93").then(n.bind(null,"73cf"))}},{path:"/streams",name:"streams",component:function(){return Promise.all([n.e("chunk-8ed778b6"),n.e("chunk-55dc5437")]).then(n.bind(null,"cf8c"))},meta:{requiresAuth:!0}},{path:"/streams/:streamId",name:"singlestream",component:function(){return Promise.all([n.e("chunk-8ed778b6"),n.e("chunk-55908ede"),n.e("chunk-06e98ac8")]).then(n.bind(null,"22de"))},meta:{requiresAuth:!0}},{path:"/projects",name:"projects",component:function(){return Promise.all([n.e("chunk-8ed778b6"),n.e("chunk-d0ba7ae6")]).then(n.bind(null,"acca"))},meta:{requiresAuth:!0}},{path:"/projects/:projectId",name:"singleproject",component:function(){return Promise.all([n.e("chunk-8ed778b6"),n.e("chunk-55908ede"),n.e("chunk-4c2eeb40")]).then(n.bind(null,"cbaf"))},meta:{requiresAuth:!0}},{path:"/profile",name:"profile",component:function(){return n.e("chunk-042a9225").then(n.bind(null,"c66d"))},meta:{requiresAuth:!0}}]});b.beforeEach(function(e,t,n){if(e.meta.requiresAuth&&!0===e.meta.requiresAuth&&!1===v.state.isAuth)return n({path:"/login"+(null!==e?"/"+window.btoa(e.path):"")});n()});var g=b,k=n("9483");Object(k["a"])("".concat("/","service-worker.js"),{ready:function(){console.log("App is being served from cache by a service worker.\nFor more details, visit https://goo.gl/AFskqB")},registered:function(){console.log("Service worker has been registered.")},cached:function(){console.log("Content has been cached for offline use.")},updatefound:function(){console.log("New content is downloading.")},updated:function(){console.log("New content is available; please refresh.")},offline:function(){console.log("No internet connection found. App is running in offline mode.")},error:function(e){console.error("Error during service worker registration:",e)}});var w=n("43f9"),_=n.n(w),S=(n("51de"),n("e094"),n("8682")),A=n("4710"),E=n.n(A);r["default"].config.productionTip=!1,r["default"].use(_.a),r["default"].use(S["a"],{locale:"en"});var y=localStorage.getItem("server");y&&(v.state.server=y),a.a.defaults.baseURL=v.state.server;var j=localStorage.getItem("token");a.a.get(v.state.server).then(function(e){return v.state.serverManifest=e.data,a.a.get("".concat(v.state.server,"/accounts?omit=logins"),{headers:{Authorization:j}})}).then(function(e){null!==e&&200===e.status?(a.a.defaults.headers.common["Authorization"]=j,v.state.isAuth=!0,v.state.user=e.data.resource,v.state.token=j,T()):T()}).catch(function(e){T()}),r["default"].prototype.$http=a.a,window.bus=new r["default"];var P=new E.a;r["default"].mixin({methods:{getHexFromString:function(e){return P.hex(e)}}});var T=function(){new r["default"]({router:g,store:v,render:function(e){return e(m)}}).$mount("#app")}},"5c0b":function(e,t,n){"use strict";var r=n("5e27"),o=n.n(r);o.a},"5e27":function(e,t,n){},"82c8":function(e,t,n){},c32f:function(e,t,n){"use strict";var r=n("d876"),o=n.n(r);t["default"]=o.a},cc44:function(e,t,n){"use strict";var r=n("1351"),o=n("c32f"),a=(n("39e5"),n("2877")),c=Object(a["a"])(o["default"],r["a"],r["b"],!1,null,null,null);c.options.__file="NavDrawer.vue",t["default"]=c.exports},d876:function(e,t){}});
//# sourceMappingURL=app.773c06c3.js.map