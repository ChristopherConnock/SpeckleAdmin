(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-35b95dcb"],{"0208":function(t,e,i){},"05ce":function(t,e,i){"use strict";i.r(e);var r=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("md-card",{staticClass:"md-elevation-3",attrs:{"md-with-hover":""}},[i("md-card-header",{staticClass:"bg-ghost-white"},[i("md-card-header-text",[i("div",{staticClass:"md-title"},[t._v("Data")]),i("div",{staticClass:"md-caption"},[t._v('Add/remove data below. Strings, numbers and booleans are supported. Changes will not be saved automatically until you click "save".')]),t.stream.commitMessage?i("div",[i("br"),i("md-divider"),i("br"),i("div",{staticClass:"md-caption"},[i("i",[t._v("Current commit message:")]),t._v(" "+t._s(t.stream.commitMessage))])],1):t._e()]),i("md-button",{staticClass:"md-primary md-raised",attrs:{disabled:!t.changed},nativeOn:{click:function(e){t.preSaveData()}}},[t._v(" SAVE ")])],1),i("md-card-content",{staticStyle:{"padding-bottom":"20px"}},[t.deStream?i("div",{staticClass:"md-layout-item md-size-100"},t._l(t.mergedLayers,function(e){return i("stream-layer",{key:e.guid,attrs:{layer:e},on:{update:t.updateLayer,remove:t.removeLayer}})})):i("div",{staticClass:"md-layout-item md-size-100 md-caption text-center",staticStyle:{padding:"5px"}},[i("br"),t._v("\n        There's no data in this stream... yet!\n        "),i("br")]),i("div",{staticClass:"md-layout",staticStyle:{"margin-top":"10px"}},[i("div",{staticClass:"md-layout-item"},[i("md-button",{staticClass:"md-icon-button md-raised md-primary",nativeOn:{click:function(e){return t.addLayer(e)}}},[i("md-icon",[t._v("add")])],1),i("md-button",{staticClass:"md-icon-button md-raised",nativeOn:{click:function(e){t.showImportCSVDialog=!0}}},[i("md-icon",[t._v("cloud_upload")]),i("md-tooltip",{attrs:{"md-direction":"top"}},[t._v("Paste a CSV file")])],1)],1),i("div",{staticClass:"md-layout-item text-right"},[i("md-button",{staticClass:"md-primary md-raised",attrs:{disabled:!t.changed},nativeOn:{click:function(e){t.preSaveData()}}},[t._v(" SAVE ")])],1)])])],1),i("br"),i("br"),i("md-dialog",{attrs:{"md-active":t.showImportCSVDialog},on:{"update:mdActive":function(e){t.showImportCSVDialog=e}}},[i("md-dialog-title",[t._v("Import CSV")]),i("div",{staticClass:"md-layout md-gutter",staticStyle:{width:"50vw",padding:"24px 24px 0","box-sizing":"border-box"}},[i("div",{staticClass:"md-layout-item md-size-100"},[i("p",[t._v("Paste your csv below.")]),i("p",{staticClass:"md-caption"},[t._v('We assume the first row will contain the column names. Each column will become a separate "output port" or layer.')])]),i("div",{staticClass:"md-layout-item md-size-100"},[i("textarea",{directives:[{name:"model",rawName:"v-model",value:t.csvInput,expression:"csvInput"}],staticStyle:{height:"150px",width:"100%"},domProps:{value:t.csvInput},on:{input:function(e){e.target.composing||(t.csvInput=e.target.value)}}})]),i("div")]),i("md-dialog-actions",[i("md-button",{staticClass:"md-primary",on:{click:function(e){t.closeCsvDialog()}}},[t._v("Cancel")]),i("md-button",{staticClass:"md-primary md-raised",on:{click:function(e){t.importCSV()}}},[t._v("Import CSV")])],1)],1),i("md-dialog",{attrs:{"md-active":t.showSaveDialog},on:{"update:mdActive":function(e){t.showSaveDialog=e}}},[i("md-dialog-title",[t._v("Commit message")]),i("div",{staticClass:"md-layout md-gutter",staticStyle:{padding:"24px 24px 0","box-sizing":"border-box"}},[i("div",{staticClass:"md-layout-item"},[i("p",[t._v("Write a short description of the reasons behind the changes you just made.")]),i("md-field",[i("label",[t._v("changelog:")]),i("md-textarea",{model:{value:t.commitMessage,callback:function(e){t.commitMessage=e},expression:"commitMessage"}})],1)],1)]),i("md-dialog-actions",[i("md-button",{staticClass:"md-primary",on:{click:function(e){t.showSaveDialog=!1}}},[t._v("Cancel")]),i("md-button",{staticClass:"md-primary md-raised",on:{click:function(e){t.saveData()}}},[t._v("Save changes")])],1)],1)],1)},a=[],n=(i("7514"),i("6b54"),i("7f7f"),i("ac6a"),i("cadf"),i("551c"),i("097d"),i("f7fe")),s=i.n(n),o=(i("13bb"),i("bc3a")),d=i.n(o),c=(i("c64e"),i("369b")),u=i.n(c),l=function(){var t=this,e=t.$createElement,i=t._self._c||e;return t.layer?i("div",{staticClass:"md-layout layer md-alignment-center-space-between"},[i("div",{staticClass:"md-layout-item md-size-20 md-body-2",staticStyle:{"padding-left":"12px","box-sizing":"border-box"}},[i("span",{staticClass:"md-caption"},[t._v("Name: ")]),i("editable-span",{attrs:{text:t.layer.name,"data-key":t.layer.guid},on:{update:t.updateName}})],1),i("div",{staticClass:"md-layout-item md-size-60",staticStyle:{"box-sizing":"border-box","padding-left":"10px"}},[t.expanded?t._e():i("md-field",[i("label",[t._v("data")]),i("md-input",{model:{value:t.rawData,callback:function(e){t.rawData=e},expression:"rawData"}})],1)],1),i("div",{staticClass:"md-layout-item md-size-10 text-right"},[i("md-button",{staticClass:"md-icon-button md-dense md-primary",nativeOn:{click:function(e){t.expanded=!t.expanded}}},[i("md-icon",[t._v(t._s(t.expanded?"expand_less":"expand_more"))])],1),i("md-button",{staticClass:"md-icon-button md-dense md-accent",nativeOn:{click:function(e){t.removeLayer()}}},[i("md-icon",[t._v("delete_forever")])],1)],1),t.expanded?i("div",{staticClass:"md-layout-item md-size-100 md-layout md-gutter",staticStyle:{"box-sizing":"border-box",padding:"10px"}},[i("div",{staticClass:"md-layout-item md-size-100"},[i("md-switch",{model:{value:t.splitArray,callback:function(e){t.splitArray=e},expression:"splitArray"}},[t._v(t._s(t.splitArray?"split at commas":"single"))])],1),i("div",{staticClass:"md-layout-item md-size-50"},[i("md-field",[i("label",[t._v("data")]),i("md-textarea",{model:{value:t.rawData,callback:function(e){t.rawData=e},expression:"rawData"}})],1)],1),i("div",{staticClass:"md-layout-item md-size-50"},[i("span",{staticClass:"md-caption"},[t._v("Parsed data:")]),i("pre",[t._v(t._s(t.parsedData))])])]):t._e()]):t._e()},h=[],m=(i("28a5"),{name:"StreamLayer",props:{layer:Object},watch:{speckledData:function(){if(this.firstCall)return this.firstCall=!1;this.emitUpdate()},layer:function(t){this.rawData=this.layer.objects.join(", ")}},computed:{speckledData:function(){if(!this.parsedData)return[];var t=this.parsedData.map(function(t){return"the meaning of life"===t?{type:"Number",value:42}:"0"===t?{type:"Number",value:0}:"boolean"===typeof t?{type:"Boolean",value:t}:"string"===typeof t?{type:"String",value:t}:"number"===typeof t?{type:"Number",value:t}:void 0});return t},parsedData:function(){if(!this.rawData)return null;var t=[];return t=this.splitArray?this.rawData.split(",").map(function(t){return t.trim()}).map(function(t){var e=null;return e=parseFloat(t),e||(e="true"===t||"false"!==t&&t),e}):[this.rawData],t}},data:function(){return{rawData:"",expanded:!1,splitArray:!0,firstCall:!0}},methods:{removeLayer:function(){this.$emit("remove",this.layer)},updateName:function(t){this.layer.name=t.text.trim(),this.emitUpdate()},__emitUpdate:function(){this.$emit("update",{layer:this.layer,objects:this.speckledData})},emitUpdate:s()(function(){this.$emit("update",{layer:this.layer,objects:this.speckledData})},1e3)},created:function(){this.rawData=this.layer.objects.join(", ")}}),f=m,p=(i("5855"),i("2877")),g=Object(p["a"])(f,l,h,!1,null,"8ae676dc",null);g.options.__file="StreamLayer.vue";var v=g.exports,_=i("c542"),y={name:"StreamEditView",components:{StreamLayer:v,StreamDetailHistory:_["a"]},computed:{mergedLayers:function(){var t=this;if(!this.deStream)return[];var e=[];return this.deStream.layers.forEach(function(i){e.push({name:i.name,isArray:!0,startIndex:i.startIndex,objectCount:i.objectCount,guid:i.guid,topology:i.topology,objects:t.deStream.objects.slice(i.startIndex,i.startIndex+i.objectCount).map(function(t){return t.value.toString()})})}),e},deStream:function(){var t=this;return this.$store.state.deStreams.find(function(e){return e.streamId===t.$route.params.streamId})},stream:function(){var t=this;return this.$store.state.streams.find(function(e){return e.streamId===t.$route.params.streamId})},canEdit:function(){return!!this.isOwner||-1!==this.stream.canWrite.indexOf(this.$store.state.user._id)},isOwner:function(){return this.stream.owner===this.$store.state.user._id}},data:function(){return{changed:!1,showSaveDialog:!1,commitMessage:"no message",showImportCSVDialog:!1,csvInput:""}},methods:{restore:function(){this.$store.dispatch("updateStream",{streamId:this.stream.streamId,deleted:!1})},updateLayer:function(t){var e=t.layer,i=t.objects;this.$store.commit("UPDATE_DE_STREAM_LAYER",{streamId:this.stream.streamId,layer:e,objects:i}),this.changed=!0},addLayer:function(){this.$store.commit("ADD_DE_STREAM_LAYER",{streamId:this.stream.streamId}),this.changed=!0},removeLayer:function(t){this.$store.commit("REMOVE_DE_STREAM_LAYER",{streamId:this.stream.streamId,layer:t}),this.changed=!0},preSaveData:function(){this.showSaveDialog=!0},saveData:function(){var t=this;this.commitMessage+=" (changed by ".concat(this.$store.state.user.name," ").concat(this.$store.state.user.surname,")"),this.$store.dispatch("updateStreamObjectsAndLayers",{streamId:this.stream.streamId,commitMessage:this.commitMessage}).then(function(e){t.showSaveDialog=!1,t.commitMessage="no message",t.changed=!1,console.log(e)}).catch(function(t){console.error(t)})},fetchData:function(t){var e=this;console.log("fetching data for ".concat(t)),d.a.get("streams/".concat(t,"?fields=layers")).then(function(i){return e.layers=i.data.resource.layers,d.a.get("streams/".concat(t,"/objects?fields=type,value"))}).then(function(i){e.objects=i.data.resources,e.$store.commit("ADD_DE_STREAM",{streamId:t,layers:e.layers,objects:e.objects})}).catch(function(t){console.error(t)})},importCSV:function(){var t=u.a.parse(this.csvInput,{dynamicTyping:!1}),e=t.data[0].map(function(e,i){return t.data.map(function(t){return t[i]})});this.$store.commit("APPEND_DE_STREAM_LAYERS_FROM_CSV",{streamId:this.stream.streamId,transposed:e}),this.showImportCSVDialog=!1,this.csvInput="",this.changed=!0},closeCsvDialog:function(){this.showImportCSVDialog=!1,this.csvInput=""}},mounted:function(){var t=this;console.log("hello data");this.$store.state.streams.find(function(e){return e.streamId===t.$route.params.streamId});this.fetchData(this.$route.params.streamId)}},b=y,C=(i("5d0e"),Object(p["a"])(b,r,a,!1,null,"27da2cd2",null));C.options.__file="StreamData.vue";e["default"]=C.exports},"369b":function(t,e,i){var r,a,n;
/* @license
Papa Parse
v4.6.2
https://github.com/mholt/PapaParse
License: MIT
*/Array.isArray||(Array.isArray=function(t){return"[object Array]"===Object.prototype.toString.call(t)}),function(i,s){a=[],r=s,n="function"===typeof r?r.apply(e,a):r,void 0===n||(t.exports=n)}(0,function(){"use strict";var t,e,i="undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==i?i:{},r=!i.document&&!!i.postMessage,a=r&&/(\?|&)papaworker(=|&|$)/.test(i.location.search),n=!1,s={},o=0,d={parse:function(e,r){var a=(r=r||{}).dynamicTyping||!1;if(S(a)&&(r.dynamicTypingFunction=a,a={}),r.dynamicTyping=a,r.transform=!!S(r.transform)&&r.transform,r.worker&&d.WORKERS_SUPPORTED){var c=function(){if(!d.WORKERS_SUPPORTED)return!1;if(!n&&null===d.SCRIPT_PATH)throw new Error("Script path cannot be determined automatically when Papa Parse is loaded asynchronously. You need to set Papa.SCRIPT_PATH manually.");var e=d.SCRIPT_PATH||t;e+=(-1!==e.indexOf("?")?"&":"?")+"papaworker";var r=new i.Worker(e);return r.onmessage=_,r.id=o++,s[r.id]=r}();return c.userStep=r.step,c.userChunk=r.chunk,c.userComplete=r.complete,c.userError=r.error,r.step=S(r.step),r.chunk=S(r.chunk),r.complete=S(r.complete),r.error=S(r.error),delete r.worker,void c.postMessage({input:e,config:r,workerId:c.id})}var u=null;return d.NODE_STREAM_INPUT,"string"==typeof e?u=r.download?new l(r):new m(r):!0===e.readable&&S(e.read)&&S(e.on)?u=new f(r):(i.File&&e instanceof File||e instanceof Object)&&(u=new h(r)),u.stream(e)},unparse:function(t,e){var i=!1,r=!0,a=",",n="\r\n",s='"',o=!1;!function(){"object"==typeof e&&("string"!=typeof e.delimiter||d.BAD_DELIMITERS.filter(function(t){return-1!==e.delimiter.indexOf(t)}).length||(a=e.delimiter),("boolean"==typeof e.quotes||Array.isArray(e.quotes))&&(i=e.quotes),"boolean"!=typeof e.skipEmptyLines&&"string"!=typeof e.skipEmptyLines||(o=e.skipEmptyLines),"string"==typeof e.newline&&(n=e.newline),"string"==typeof e.quoteChar&&(s=e.quoteChar),"boolean"==typeof e.header&&(r=e.header))}();var c=new RegExp(s,"g");if("string"==typeof t&&(t=JSON.parse(t)),Array.isArray(t)){if(!t.length||Array.isArray(t[0]))return l(null,t,o);if("object"==typeof t[0])return l(u(t[0]),t,o)}else if("object"==typeof t)return"string"==typeof t.data&&(t.data=JSON.parse(t.data)),Array.isArray(t.data)&&(t.fields||(t.fields=t.meta&&t.meta.fields),t.fields||(t.fields=Array.isArray(t.data[0])?t.fields:u(t.data[0])),Array.isArray(t.data[0])||"object"==typeof t.data[0]||(t.data=[t.data])),l(t.fields||[],t.data||[],o);throw"exception: Unable to serialize unrecognized input";function u(t){if("object"!=typeof t)return[];var e=[];for(var i in t)e.push(i);return e}function l(t,e,i){var s="";"string"==typeof t&&(t=JSON.parse(t)),"string"==typeof e&&(e=JSON.parse(e));var o=Array.isArray(t)&&0<t.length,d=!Array.isArray(e[0]);if(o&&r){for(var c=0;c<t.length;c++)0<c&&(s+=a),s+=h(t[c],c);0<e.length&&(s+=n)}for(var u=0;u<e.length;u++){var l=o?t.length:e[u].length,m=!1,f=o?0===Object.keys(e[u]).length:0===e[u].length;if(i&&!o&&(m="greedy"===i?""===e[u].join("").trim():1===e[u].length&&0===e[u][0].length),"greedy"===i&&o){for(var p=[],g=0;g<l;g++){var v=d?t[g]:g;p.push(e[u][v])}m=""===p.join("").trim()}if(!m){for(var _=0;_<l;_++){0<_&&!f&&(s+=a);var y=o&&d?t[_]:_;s+=h(e[u][y],_)}u<e.length-1&&(!i||0<l&&!f)&&(s+=n)}}return s}function h(t,e){if(null==t)return"";if(t.constructor===Date)return JSON.stringify(t).slice(1,25);t=t.toString().replace(c,s+s);var r="boolean"==typeof i&&i||Array.isArray(i)&&i[e]||function(t,e){for(var i=0;i<e.length;i++)if(-1<t.indexOf(e[i]))return!0;return!1}(t,d.BAD_DELIMITERS)||-1<t.indexOf(a)||" "===t.charAt(0)||" "===t.charAt(t.length-1);return r?s+t+s:t}}};if(d.RECORD_SEP=String.fromCharCode(30),d.UNIT_SEP=String.fromCharCode(31),d.BYTE_ORDER_MARK="\ufeff",d.BAD_DELIMITERS=["\r","\n",'"',d.BYTE_ORDER_MARK],d.WORKERS_SUPPORTED=!r&&!!i.Worker,d.SCRIPT_PATH=null,d.NODE_STREAM_INPUT=1,d.LocalChunkSize=10485760,d.RemoteChunkSize=5242880,d.DefaultDelimiter=",",d.Parser=v,d.ParserHandle=p,d.NetworkStreamer=l,d.FileStreamer=h,d.StringStreamer=m,d.ReadableStreamStreamer=f,i.jQuery){var c=i.jQuery;c.fn.parse=function(t){var e=t.config||{},r=[];return this.each(function(t){if("INPUT"!==c(this).prop("tagName").toUpperCase()||"file"!==c(this).attr("type").toLowerCase()||!i.FileReader||!this.files||0===this.files.length)return!0;for(var a=0;a<this.files.length;a++)r.push({file:this.files[a],inputElem:this,instanceConfig:c.extend({},e)})}),a(),this;function a(){if(0!==r.length){var e,i,a,s,o=r[0];if(S(t.before)){var u=t.before(o.file,o.inputElem);if("object"==typeof u){if("abort"===u.action)return e="AbortError",i=o.file,a=o.inputElem,s=u.reason,void(S(t.error)&&t.error({name:e},i,a,s));if("skip"===u.action)return void n();"object"==typeof u.config&&(o.instanceConfig=c.extend(o.instanceConfig,u.config))}else if("skip"===u)return void n()}var l=o.instanceConfig.complete;o.instanceConfig.complete=function(t){S(l)&&l(t,o.file,o.inputElem),n()},d.parse(o.file,o.instanceConfig)}else S(t.complete)&&t.complete()}function n(){r.splice(0,1),a()}}}function u(t){this._handle=null,this._finished=!1,this._completed=!1,this._input=null,this._baseIndex=0,this._partialLine="",this._rowCount=0,this._start=0,this._nextChunk=null,this.isFirstChunk=!0,this._completeResults={data:[],errors:[],meta:{}},function(t){var e=C(t);e.chunkSize=parseInt(e.chunkSize),t.step||t.chunk||(e.chunkSize=null),this._handle=new p(e),(this._handle.streamer=this)._config=e}.call(this,t),this.parseChunk=function(t,e){if(this.isFirstChunk&&S(this._config.beforeFirstChunk)){var r=this._config.beforeFirstChunk(t);void 0!==r&&(t=r)}this.isFirstChunk=!1;var n=this._partialLine+t;this._partialLine="";var s=this._handle.parse(n,this._baseIndex,!this._finished);if(!this._handle.paused()&&!this._handle.aborted()){var o=s.meta.cursor;this._finished||(this._partialLine=n.substring(o-this._baseIndex),this._baseIndex=o),s&&s.data&&(this._rowCount+=s.data.length);var c=this._finished||this._config.preview&&this._rowCount>=this._config.preview;if(a)i.postMessage({results:s,workerId:d.WORKER_ID,finished:c});else if(S(this._config.chunk)&&!e){if(this._config.chunk(s,this._handle),this._handle.paused()||this._handle.aborted())return;s=void 0,this._completeResults=void 0}return this._config.step||this._config.chunk||(this._completeResults.data=this._completeResults.data.concat(s.data),this._completeResults.errors=this._completeResults.errors.concat(s.errors),this._completeResults.meta=s.meta),this._completed||!c||!S(this._config.complete)||s&&s.meta.aborted||(this._config.complete(this._completeResults,this._input),this._completed=!0),c||s&&s.meta.paused||this._nextChunk(),s}},this._sendError=function(t){S(this._config.error)?this._config.error(t):a&&this._config.error&&i.postMessage({workerId:d.WORKER_ID,error:t,finished:!1})}}function l(t){var e;(t=t||{}).chunkSize||(t.chunkSize=d.RemoteChunkSize),u.call(this,t),this._nextChunk=r?function(){this._readChunk(),this._chunkLoaded()}:function(){this._readChunk()},this.stream=function(t){this._input=t,this._nextChunk()},this._readChunk=function(){if(this._finished)this._chunkLoaded();else{if(e=new XMLHttpRequest,this._config.withCredentials&&(e.withCredentials=this._config.withCredentials),r||(e.onload=w(this._chunkLoaded,this),e.onerror=w(this._chunkError,this)),e.open("GET",this._input,!r),this._config.downloadRequestHeaders){var t=this._config.downloadRequestHeaders;for(var i in t)e.setRequestHeader(i,t[i])}if(this._config.chunkSize){var a=this._start+this._config.chunkSize-1;e.setRequestHeader("Range","bytes="+this._start+"-"+a),e.setRequestHeader("If-None-Match","webkit-no-cache")}try{e.send()}catch(t){this._chunkError(t.message)}r&&0===e.status?this._chunkError():this._start+=this._config.chunkSize}},this._chunkLoaded=function(){4===e.readyState&&(e.status<200||400<=e.status?this._chunkError():(this._finished=!this._config.chunkSize||this._start>function(t){var e=t.getResponseHeader("Content-Range");return null===e?-1:parseInt(e.substr(e.lastIndexOf("/")+1))}(e),this.parseChunk(e.responseText)))},this._chunkError=function(t){var i=e.statusText||t;this._sendError(new Error(i))}}function h(t){var e,i;(t=t||{}).chunkSize||(t.chunkSize=d.LocalChunkSize),u.call(this,t);var r="undefined"!=typeof FileReader;this.stream=function(t){this._input=t,i=t.slice||t.webkitSlice||t.mozSlice,r?((e=new FileReader).onload=w(this._chunkLoaded,this),e.onerror=w(this._chunkError,this)):e=new FileReaderSync,this._nextChunk()},this._nextChunk=function(){this._finished||this._config.preview&&!(this._rowCount<this._config.preview)||this._readChunk()},this._readChunk=function(){var t=this._input;if(this._config.chunkSize){var a=Math.min(this._start+this._config.chunkSize,this._input.size);t=i.call(t,this._start,a)}var n=e.readAsText(t,this._config.encoding);r||this._chunkLoaded({target:{result:n}})},this._chunkLoaded=function(t){this._start+=this._config.chunkSize,this._finished=!this._config.chunkSize||this._start>=this._input.size,this.parseChunk(t.target.result)},this._chunkError=function(){this._sendError(e.error)}}function m(t){var e;u.call(this,t=t||{}),this.stream=function(t){return e=t,this._nextChunk()},this._nextChunk=function(){if(!this._finished){var t=this._config.chunkSize,i=t?e.substr(0,t):e;return e=t?e.substr(t):"",this._finished=!e,this.parseChunk(i)}}}function f(t){u.call(this,t=t||{});var e=[],i=!0,r=!1;this.pause=function(){u.prototype.pause.apply(this,arguments),this._input.pause()},this.resume=function(){u.prototype.resume.apply(this,arguments),this._input.resume()},this.stream=function(t){this._input=t,this._input.on("data",this._streamData),this._input.on("end",this._streamEnd),this._input.on("error",this._streamError)},this._checkIsFinished=function(){r&&1===e.length&&(this._finished=!0)},this._nextChunk=function(){this._checkIsFinished(),e.length?this.parseChunk(e.shift()):i=!0},this._streamData=w(function(t){try{e.push("string"==typeof t?t:t.toString(this._config.encoding)),i&&(i=!1,this._checkIsFinished(),this.parseChunk(e.shift()))}catch(t){this._streamError(t)}},this),this._streamError=w(function(t){this._streamCleanUp(),this._sendError(t)},this),this._streamEnd=w(function(){this._streamCleanUp(),r=!0,this._streamData("")},this),this._streamCleanUp=w(function(){this._input.removeListener("data",this._streamData),this._input.removeListener("end",this._streamEnd),this._input.removeListener("error",this._streamError)},this)}function p(t){var e,i,r,a=/^\s*-?(\d*\.?\d+|\d+\.?\d*)(e[-+]?\d+)?\s*$/i,n=/(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))/,s=this,o=0,c=0,u=!1,l=!1,h=[],m={data:[],errors:[],meta:{}};if(S(t.step)){var f=t.step;t.step=function(e){if(m=e,y())_();else{if(_(),0===m.data.length)return;o+=e.data.length,t.preview&&o>t.preview?i.abort():f(m,s)}}}function p(e){return"greedy"===t.skipEmptyLines?""===e.join("").trim():1===e.length&&0===e[0].length}function _(){if(m&&r&&(w("Delimiter","UndetectableDelimiter","Unable to auto-detect delimiting character; defaulted to '"+d.DefaultDelimiter+"'"),r=!1),t.skipEmptyLines)for(var e=0;e<m.data.length;e++)p(m.data[e])&&m.data.splice(e--,1);return y()&&function(){if(m){for(var e=0;y()&&e<m.data.length;e++)for(var i=0;i<m.data[e].length;i++){var r=m.data[e][i];t.trimHeaders&&(r=r.trim()),h.push(r)}m.data.splice(0,1)}}(),function(){if(!m||!t.header&&!t.dynamicTyping&&!t.transform)return m;for(var e=0;e<m.data.length;e++){var i,r=t.header?{}:[];for(i=0;i<m.data[e].length;i++){var a=i,n=m.data[e][i];t.header&&(a=i>=h.length?"__parsed_extra":h[i]),t.transform&&(n=t.transform(n,a)),n=b(a,n),"__parsed_extra"===a?(r[a]=r[a]||[],r[a].push(n)):r[a]=n}m.data[e]=r,t.header&&(i>h.length?w("FieldMismatch","TooManyFields","Too many fields: expected "+h.length+" fields but parsed "+i,c+e):i<h.length&&w("FieldMismatch","TooFewFields","Too few fields: expected "+h.length+" fields but parsed "+i,c+e))}return t.header&&m.meta&&(m.meta.fields=h),c+=m.data.length,m}()}function y(){return t.header&&0===h.length}function b(e,i){return r=e,t.dynamicTypingFunction&&void 0===t.dynamicTyping[r]&&(t.dynamicTyping[r]=t.dynamicTypingFunction(r)),!0===(t.dynamicTyping[r]||t.dynamicTyping)?"true"===i||"TRUE"===i||"false"!==i&&"FALSE"!==i&&(a.test(i)?parseFloat(i):n.test(i)?new Date(i):""===i?null:i):i;var r}function w(t,e,i,r){m.errors.push({type:t,code:e,message:i,row:r})}this.parse=function(a,n,s){var o=t.quoteChar||'"';if(t.newline||(t.newline=function(t,e){t=t.substr(0,1048576);var i=new RegExp(g(e)+"([^]*?)"+g(e),"gm"),r=(t=t.replace(i,"")).split("\r"),a=t.split("\n"),n=1<a.length&&a[0].length<r[0].length;if(1===r.length||n)return"\n";for(var s=0,o=0;o<r.length;o++)"\n"===r[o][0]&&s++;return s>=r.length/2?"\r\n":"\r"}(a,o)),r=!1,t.delimiter)S(t.delimiter)&&(t.delimiter=t.delimiter(a),m.meta.delimiter=t.delimiter);else{var c=function(e,i,r,a){for(var n,s,o,c=[",","\t","|",";",d.RECORD_SEP,d.UNIT_SEP],u=0;u<c.length;u++){var l=c[u],h=0,m=0,f=0;o=void 0;for(var g=new v({comments:a,delimiter:l,newline:i,preview:10}).parse(e),_=0;_<g.data.length;_++)if(r&&p(g.data[_]))f++;else{var y=g.data[_].length;m+=y,void 0!==o?1<y&&(h+=Math.abs(y-o),o=y):o=y}0<g.data.length&&(m/=g.data.length-f),(void 0===s||h<s)&&1.99<m&&(s=h,n=l)}return{successful:!!(t.delimiter=n),bestDelimiter:n}}(a,t.newline,t.skipEmptyLines,t.comments);c.successful?t.delimiter=c.bestDelimiter:(r=!0,t.delimiter=d.DefaultDelimiter),m.meta.delimiter=t.delimiter}var l=C(t);return t.preview&&t.header&&l.preview++,e=a,i=new v(l),m=i.parse(e,n,s),_(),u?{meta:{paused:!0}}:m||{meta:{paused:!1}}},this.paused=function(){return u},this.pause=function(){u=!0,i.abort(),e=e.substr(i.getCharIndex())},this.resume=function(){u=!1,s.streamer.parseChunk(e,!0)},this.aborted=function(){return l},this.abort=function(){l=!0,i.abort(),m.meta.aborted=!0,S(t.complete)&&t.complete(m),e=""}}function g(t){return t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function v(t){var e,i=(t=t||{}).delimiter,r=t.newline,a=t.comments,n=t.step,s=t.preview,o=t.fastMode,c=e=void 0===t.quoteChar?'"':t.quoteChar;if(void 0!==t.escapeChar&&(c=t.escapeChar),("string"!=typeof i||-1<d.BAD_DELIMITERS.indexOf(i))&&(i=","),a===i)throw"Comment character same as delimiter";!0===a?a="#":("string"!=typeof a||-1<d.BAD_DELIMITERS.indexOf(a))&&(a=!1),"\n"!==r&&"\r"!==r&&"\r\n"!==r&&(r="\n");var u=0,l=!1;this.parse=function(t,d,h){if("string"!=typeof t)throw"Input must be a string";var m=t.length,f=i.length,p=r.length,g=a.length,v=S(n),_=[],y=[],b=[],C=u=0;if(!t)return M();if(o||!1!==o&&-1===t.indexOf(e)){for(var w=t.split(r),k=0;k<w.length;k++){if(b=w[k],u+=b.length,k!==w.length-1)u+=r.length;else if(h)return M();if(!a||b.substr(0,g)!==a){if(v){if(_=[],A(b.split(i)),z(),l)return M()}else A(b.split(i));if(s&&s<=k)return _=_.slice(0,s),M(!0)}}return M()}for(var x,E=t.indexOf(i,u),D=t.indexOf(r,u),I=new RegExp(c.replace(/[-[\]\/{}()*+?.\\^$|]/g,"\\$&")+e,"g");;)if(t[u]!==e)if(a&&0===b.length&&t.substr(u,g)===a){if(-1===D)return M();u=D+p,D=t.indexOf(r,u),E=t.indexOf(i,u)}else if(-1!==E&&(E<D||-1===D))b.push(t.substring(u,E)),u=E+f,E=t.indexOf(i,u);else{if(-1===D)break;if(b.push(t.substring(u,D)),L(D+p),v&&(z(),l))return M();if(s&&_.length>=s)return M(!0)}else for(x=u,u++;;){if(-1===(x=t.indexOf(e,x+1)))return h||y.push({type:"Quotes",code:"MissingQuotes",message:"Quoted field unterminated",row:_.length,index:u}),j();if(x===m-1)return j(t.substring(u,x).replace(I,e));if(e!==c||t[x+1]!==c){if(e===c||0===x||t[x-1]!==c){var R=T(-1===D?E:Math.min(E,D));if(t[x+1+R]===i){b.push(t.substring(u,x).replace(I,e)),u=x+1+R+f,E=t.indexOf(i,u),D=t.indexOf(r,u);break}var O=T(D);if(t.substr(x+1+O,p)===r){if(b.push(t.substring(u,x).replace(I,e)),L(x+1+O+p),E=t.indexOf(i,u),v&&(z(),l))return M();if(s&&_.length>=s)return M(!0);break}y.push({type:"Quotes",code:"InvalidQuotes",message:"Trailing quote on quoted field is malformed",row:_.length,index:u}),x++}}else x++}return j();function A(t){_.push(t),C=u}function T(e){var i=0;if(-1!==e){var r=t.substring(x+1,e);r&&""===r.trim()&&(i=r.length)}return i}function j(e){return h||(void 0===e&&(e=t.substr(u)),b.push(e),u=m,A(b),v&&z()),M()}function L(e){u=e,A(b),b=[],D=t.indexOf(r,u)}function M(t){return{data:_,errors:y,meta:{delimiter:i,linebreak:r,aborted:l,truncated:!!t,cursor:C+(d||0)}}}function z(){n(M()),_=[],y=[]}},this.abort=function(){l=!0},this.getCharIndex=function(){return u}}function _(t){var e=t.data,i=s[e.workerId],r=!1;if(e.error)i.userError(e.error,e.file);else if(e.results&&e.results.data){var a={abort:function(){r=!0,y(e.workerId,{data:[],errors:[],meta:{aborted:!0}})},pause:b,resume:b};if(S(i.userStep)){for(var n=0;n<e.results.data.length&&(i.userStep({data:[e.results.data[n]],errors:e.results.errors,meta:e.results.meta},a),!r);n++);delete e.results}else S(i.userChunk)&&(i.userChunk(e.results,a,e.file),delete e.results)}e.finished&&!r&&y(e.workerId,e.results)}function y(t,e){var i=s[t];S(i.userComplete)&&i.userComplete(e),i.terminate(),delete s[t]}function b(){throw"Not implemented."}function C(t){if("object"!=typeof t||null===t)return t;var e=Array.isArray(t)?[]:{};for(var i in t)e[i]=C(t[i]);return e}function w(t,e){return function(){t.apply(e,arguments)}}function S(t){return"function"==typeof t}return a?i.onmessage=function(t){var e=t.data;if(void 0===d.WORKER_ID&&e&&(d.WORKER_ID=e.workerId),"string"==typeof e.input)i.postMessage({workerId:d.WORKER_ID,results:d.parse(e.input,e.config),finished:!0});else if(i.File&&e.input instanceof File||e.input instanceof Object){var r=d.parse(e.input,e.config);r&&i.postMessage({workerId:d.WORKER_ID,results:r,finished:!0})}}:d.WORKERS_SUPPORTED&&(e=document.getElementsByTagName("script"),t=e.length?e[e.length-1].src:"",document.body?document.addEventListener("DOMContentLoaded",function(){n=!0},!0):n=!0),(l.prototype=Object.create(u.prototype)).constructor=l,(h.prototype=Object.create(u.prototype)).constructor=h,(m.prototype=Object.create(m.prototype)).constructor=m,(f.prototype=Object.create(u.prototype)).constructor=f,d})},"497e":function(t,e,i){},5855:function(t,e,i){"use strict";var r=i("0208"),a=i.n(r);a.a},"5d0e":function(t,e,i){"use strict";var r=i("8280"),a=i.n(r);a.a},8280:function(t,e,i){},"98cf":function(t,e,i){"use strict";var r=i("497e"),a=i.n(r);a.a},c542:function(t,e,i){"use strict";var r=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("md-card",{staticClass:"md-elevation-3",attrs:{"md-with-hover":""}},[t.stream.parent?i("md-card",{staticClass:"md-elevation-0"},[i("md-card-content",[i("div",{staticClass:"md-title"},[t._v("Parent")])])],1):t._e(),t.stream.parent?i("stream-card-small",{attrs:{"stream-id":t.stream.parent,removable:!1}}):t._e(),i("md-card",{staticClass:"md-elevation-0"},[i("md-card-header",{staticClass:"bg-ghost-white"},[i("md-card-header-text",[i("div",{staticClass:"md-title"},[t._v("Children "),i("span",{staticClass:"md-caption"},[t._v("("+t._s(t.stream.children.length)+")")])])])],1)],1),0===t.stream.children.length?i("md-card",{staticClass:"md-elevation-0"},[i("md-card-content",[i("div",{staticClass:"md-caption"},[t._v("This stream has no children.")])])],1):t._e(),t._l(t.paginatedKids,function(t){return i("stream-card-small",{key:t,attrs:{"stream-id":t,removable:!1}})}),i("br"),i("div",{staticClass:"text-center",staticStyle:{"padding-bottom":"5px"}},[i("md-button",{staticClass:"md-raised md-primary",attrs:{disabled:t.paginatedKids.length===t.stream.children.length},nativeOn:{click:function(e){t.endIndex+=5}}},[t._v("\n      Show More ("+t._s(t.paginatedKids.length)+" / "+t._s(t.stream.children.length)+")\n    ")])],1)],2)},a=[],n=(i("f7fe"),i("adc7")),s={name:"StreamDetailHistory",components:{StreamCardSmall:n["a"]},props:{stream:Object},computed:{paginatedKids:function(){return this.stream.children.reverse().slice(this.startIndex,this.endIndex)},canEdit:function(){return!!this.isOwner||-1!==this.stream.canWrite.indexOf(this.$store.state.user._id)},isOwner:function(){return this.stream.owner===this.$store.state.user._id}},data:function(){return{startIndex:0,itemsPerPage:5,endIndex:5}},methods:{}},o=s,d=(i("98cf"),i("2877")),c=Object(d["a"])(o,r,a,!1,null,"0b8cffa6",null);c.options.__file="StreamDetailHistory.vue";e["a"]=c.exports},f7fe:function(t,e,i){(function(e){var i="Expected a function",r=NaN,a="[object Symbol]",n=/^\s+|\s+$/g,s=/^[-+]0x[0-9a-f]+$/i,o=/^0b[01]+$/i,d=/^0o[0-7]+$/i,c=parseInt,u="object"==typeof e&&e&&e.Object===Object&&e,l="object"==typeof self&&self&&self.Object===Object&&self,h=u||l||Function("return this")(),m=Object.prototype,f=m.toString,p=Math.max,g=Math.min,v=function(){return h.Date.now()};function _(t,e,r){var a,n,s,o,d,c,u=0,l=!1,h=!1,m=!0;if("function"!=typeof t)throw new TypeError(i);function f(e){var i=a,r=n;return a=n=void 0,u=e,o=t.apply(r,i),o}function _(t){return u=t,d=setTimeout(S,e),l?f(t):o}function b(t){var i=t-c,r=t-u,a=e-i;return h?g(a,s-r):a}function C(t){var i=t-c,r=t-u;return void 0===c||i>=e||i<0||h&&r>=s}function S(){var t=v();if(C(t))return k(t);d=setTimeout(S,b(t))}function k(t){return d=void 0,m&&a?f(t):(a=n=void 0,o)}function x(){void 0!==d&&clearTimeout(d),u=0,a=c=n=d=void 0}function E(){return void 0===d?o:k(v())}function D(){var t=v(),i=C(t);if(a=arguments,n=this,c=t,i){if(void 0===d)return _(c);if(h)return d=setTimeout(S,e),f(c)}return void 0===d&&(d=setTimeout(S,e)),o}return e=w(e)||0,y(r)&&(l=!!r.leading,h="maxWait"in r,s=h?p(w(r.maxWait)||0,e):s,m="trailing"in r?!!r.trailing:m),D.cancel=x,D.flush=E,D}function y(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function b(t){return!!t&&"object"==typeof t}function C(t){return"symbol"==typeof t||b(t)&&f.call(t)==a}function w(t){if("number"==typeof t)return t;if(C(t))return r;if(y(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=y(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(n,"");var i=o.test(t);return i||d.test(t)?c(t.slice(2),i?2:8):s.test(t)?r:+t}t.exports=_}).call(this,i("c8ba"))}}]);
//# sourceMappingURL=chunk-35b95dcb.89b58074.js.map