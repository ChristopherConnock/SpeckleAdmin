(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-55dc5437"],{"0836":function(t,e,s){"use strict";var a=s("3eb1"),i=s.n(a);i.a},"3eb1":function(t,e,s){},"523f":function(t,e,s){},cf8c:function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return 0===t.streams.length?s("md-empty-state",{attrs:{"md-icon":"import_export","md-label":"","md-description":"You don't have any streams yet."}}):s("div",{staticClass:"md-layout"},[s("md-card",{staticClass:"md-primary-xx main-toolbar md-elevation-3"},[s("md-card-content",{staticClass:"md-layout md-alignment-center-space-between"},[s("div",{staticClass:"md-layout-item md-size-95"},[s("md-field",{attrs:{"md-clearable":""}},[s("md-icon",[t._v("search")]),s("label",[t._v("name:box id:xxx private:true")]),s("md-input",{attrs:{spellcheck:"false"},on:{input:t.updateSearch}})],1)],1),s("div",{staticClass:"md-layout-item md-size-5 text-right"},[s("md-button",{staticClass:"md-icon-button md-raised md-primary"},[s("md-icon",[t._v("add")])],1)],1),t.selectedStreams.length>0?s("div",{staticClass:"md-layout-item md-size-100",staticStyle:{"margin-top":"10px"}},[s("md-button",{staticClass:"md-raised md-dense md-primary",nativeOn:{click:function(e){return t.clearSelection(e)}}},[t._v("clear selection ("+t._s(t.selectedStreams.length)+")")]),s("md-button",{staticClass:"md-raised-xx md-dense md-accent",nativeOn:{click:function(e){return t.deleteStreams(e)}}},[t._v("delete")]),s("md-button",{staticClass:"md-raised md-dense",nativeOn:{click:function(e){return t.togglePermissions(e)}}},[t._v("Make "+t._s(t.defaultPermission))]),s("md-button",{staticClass:"md-raised md-dense"},[t._v("Create Project")])],1):t._e()])],1),t._l(t.paginatedStreams,function(e){return s("div",{key:e._id,staticClass:"md-layout-item md-small-size-100 md-medium-size-50 md-large-size-33 md-xlarge-size-33"},[s("stream-card",{attrs:{stream:e},on:{selected:t.selectThis,deleted:t.clearSelection}})],1)}),s("div",{staticClass:"md-layout-item md-size-100"},[s("md-card",{staticClass:"md-elevation-0"},[s("md-button",{staticClass:"md-raised btn-no-margin md-primary",attrs:{disabled:t.paginatedStreams.length===t.filteredStreams.length},nativeOn:{click:function(e){t.endIndex+=12}}},[t._v("\n        Show More ("+t._s(t.paginatedStreams.length)+" / "+t._s(t.filteredStreams.length)+")\n      ")])],1)],1)],2)},i=[],r=(s("20d6"),s("6762"),s("2fdb"),s("28a5"),s("ac6a"),s("f7fe")),n=s.n(r),d=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("md-card",{class:{"stream-card":!0,selected:t.selected},attrs:{"md-with-hover":""}},[s("md-card-header",{on:{click:function(e){t.selected=!t.selected}}},[s("md-card-header-text",[s("router-link",{attrs:{to:"/streams/"+t.stream.streamId}},[s("div",{staticClass:"md-title"},[t._v(t._s(t.stream.name))]),s("div",{staticClass:"md-subhead",attrs:{stlye:"user-select:all;"}},[t._v(t._s(t.stream.streamId))]),s("div",{staticClass:"md-caption",domProps:{innerHTML:t._s(t.compiledDescription)}})])],1),s("md-checkbox",{attrs:{value:"1"},nativeOn:{click:function(e){t.$emit("selected",t.stream)}},model:{value:t.selected,callback:function(e){t.selected=e},expression:"selected"}})],1),s("md-card-content",[s("div",{staticClass:"md-layout md-alignment-center-center"},[s("div",{staticClass:"md-layout-item md-size-10"},[s("md-icon",[t._v("access_time")])],1),s("div",{staticClass:"md-layout-item md-caption"},[s("strong",[s("timeago",{attrs:{datetime:t.stream.updatedAt}})],1)]),s("div",{staticClass:"md-layout-item md-size-10"},[s("md-icon",[t._v("create")])],1),s("div",{staticClass:"md-layout-item md-caption"},[t._v("\n        "+t._s(t.createdAt)+"\n      ")]),s("div",{staticClass:"md-layout-item md-caption md-size-20"},[s("md-icon",[t._v(t._s(t.stream.private?"https":"public"))]),t._v("\n        "+t._s(t.stream.private?"private":"public")+"\n      ")],1),s("div",{staticClass:"md-layout-item md-size-100"},[s("md-chips",{staticClass:"stream-chips",attrs:{"md-placeholder":"add tags"},on:{input:t.updateTags},model:{value:t.stream.tags,callback:function(e){t.$set(t.stream,"tags",e)},expression:"stream.tags"}})],1)])]),s("md-card-actions",[s("md-button",{directives:[{name:"show",rawName:"v-show",value:t.isOwner,expression:"isOwner"}],staticClass:"md-accent",nativeOn:{click:function(e){return t.deleteStream(e)}}},[t._v("Delete")]),s("md-button",{staticClass:"md-raised-xxx",attrs:{to:"/streams/"+t.stream.streamId}},[t._v("More...")])],1)],1)},c=[],m=s("0e54"),l=s.n(m),o={name:"StreamCard",props:{stream:Object},watch:{selected:function(){this.$emit("selected",this.stream)}},computed:{createdAt:function(){var t=new Date(this.stream.createdAt);return t.toLocaleString("en",{year:"numeric",month:"long",day:"numeric"})},compiledDescription:function(){return l()(this.stream.description.substring(0,220)+" ...",{sanitize:!0})},canEdit:function(){return!!this.isOwner||-1!==this.stream.canWrite.indexOf(this.$store.state.user._id)},isOwner:function(){return this.stream.owner===this.$store.state.user._id}},data:function(){return{selected:!1}},methods:{deleteStream:function(){this.$store.dispatch("updateStream",{streamId:this.stream.streamId,deleted:!0}),this.$emit("deleted")},updateTags:n()(function(t){this.$store.dispatch("updateStream",{streamId:this.stream.streamId,tags:this.stream.tags})},1e3)},mounted:function(){var t=this;bus.$on("unselect-all",function(){t.selected=!1})}},u=o,h=(s("0836"),s("2877")),f=Object(h["a"])(u,d,c,!1,null,"308bdc36",null);f.options.__file="StreamCard.vue";var p=f.exports,v={name:"StreamsView",components:{StreamCard:p},computed:{streams:function(){return this.$store.state.streams.filter(function(t){return null==t.parent&&!1===t.deleted})},filteredStreams:function(){return this.$store.getters.filteredStreams(this.filters)},paginatedStreams:function(){return this.filteredStreams.slice(this.startIndex,this.endIndex)}},data:function(){return{startIndex:0,itemsPerPage:12,endIndex:12,selectedStreams:[],searchfilter:"",filters:[],defaultPermission:"private"}},watch:{selectedStreams:function(){var t=0,e=0;this.selectedStreams.forEach(function(s){s.private?t++:e++}),this.defaultPermission=t>e?"public":"private"}},methods:{togglePermissions:function(){var t=this;this.selectedStreams.forEach(function(e){t.$store.dispatch("updateStream",{streamId:e.streamId,private:"private"===t.defaultPermission})}),this.defaultPermission="private"===this.defaultPermission?"public":"private"},deleteStreams:function(){var t=this;this.selectedStreams.forEach(function(e){t.$store.dispatch("updateStream",{streamId:e.streamId,deleted:!0})}),this.clearSelection()},updateSearch:n()(function(t){this.searchfilter=t;try{var e=this.searchfilter.split(" ").map(function(t){return t.includes(":")?{key:t.split(":")[0],value:t.split(":")[1]}:t.includes("public")||t.includes("private")||t.includes("mine")||t.includes("shared")?{key:t,value:null}:{key:"name",value:t}});this.filters=e}catch(s){this.filters=[{key:"name",value:t}]}},1e3),selectThis:function(t){var e=this.selectedStreams.findIndex(function(e){return e.streamId===t.streamId});-1===e?this.selectedStreams.unshift(t):this.selectedStreams.splice(e,1)},clearSelection:function(){this.defaultPermission="private",bus.$emit("unselect-all")},checkSelection:function(){this.selectedStreams=this.selectedStreams.filter(function(t){return!t.deleted})}},created:function(){}},S=v,_=(s("f726"),Object(h["a"])(S,a,i,!1,null,"46980b7f",null));_.options.__file="Streams.vue";e["default"]=_.exports},f726:function(t,e,s){"use strict";var a=s("523f"),i=s.n(a);i.a}}]);
//# sourceMappingURL=chunk-55dc5437.f3c87f02.js.map