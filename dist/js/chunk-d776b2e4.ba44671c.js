(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-d776b2e4"],{"02f4":function(t,e,s){var r=s("4588"),n=s("be13");t.exports=function(t){return function(e,s){var i,a,c=String(n(e)),o=r(s),d=c.length;return o<0||o>=d?t?"":void 0:(i=c.charCodeAt(o),i<55296||i>56319||o+1===d||(a=c.charCodeAt(o+1))<56320||a>57343?t?c.charAt(o):i:t?c.slice(o,o+2):a-56320+(i-55296<<10)+65536)}}},"0e47":function(t,e,s){},"0e78":function(t,e,s){},"2d18":function(t,e,s){},"2f21":function(t,e,s){"use strict";var r=s("79e5");t.exports=function(t,e){return!!t&&r(function(){e?t.call(null,function(){},1):t.call(null)})}},4136:function(t,e,s){"use strict";var r=s("603d"),n=s.n(r);n.a},"42b5":function(t,e,s){},"497e":function(t,e,s){},"4f7f":function(t,e,s){"use strict";var r=s("c26b"),n=s("b39a"),i="Set";t.exports=s("e0b8")(i,function(t){return function(){return t(this,arguments.length>0?arguments[0]:void 0)}},{add:function(t){return r.def(n(this,i),t=0===t?0:t,t)}},r)},"55dd":function(t,e,s){"use strict";var r=s("5ca1"),n=s("d8e8"),i=s("4bf8"),a=s("79e5"),c=[].sort,o=[1,2,3];r(r.P+r.F*(a(function(){o.sort(void 0)})||!a(function(){o.sort(null)})||!s("2f21")(c)),"Array",{sort:function(t){return void 0===t?c.call(i(this)):c.call(i(this),n(t))}})},"5dbc":function(t,e,s){var r=s("d3f4"),n=s("8b97").set;t.exports=function(t,e,s){var i,a=e.constructor;return a!==s&&"function"==typeof a&&(i=a.prototype)!==s.prototype&&r(i)&&n&&n(t,i),t}},"5df3":function(t,e,s){"use strict";var r=s("02f4")(!0);s("01f9")(String,"String",function(t){this._t=String(t),this._i=0},function(){var t,e=this._t,s=this._i;return s>=e.length?{value:void 0,done:!0}:(t=r(e,s),this._i+=t.length,{value:t,done:!1})})},"5f9d":function(t,e,s){"use strict";var r=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("md-card",{staticClass:"md-elevation-3",attrs:{"md-with-hover":""}},[s("md-card-header",{staticClass:"bg-ghost-white"},[s("md-card-header-text",[s("div",{staticClass:"md-title"},[s("md-icon",[t._v("share")]),t._v(" Connectivity")],1),s("div",{staticClass:"md-caption"},[t._v("Where this stream is received and sent from.")])])],1),s("md-card-content",[s("br"),t._l(t.clients,function(t){return s("client-card",{key:t._id,attrs:{client:t}})})],2)],1)},n=[],i=(s("f7fe"),function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"md-layout client md-alignment-center-center"},[s("div",{staticClass:"md-layout-item md-size-10"},[s("md-icon",{class:{blue:"cloud_upload"===t.icon}},[t._v(t._s(t.icon))])],1),s("div",{staticClass:"md-layout-item md-caption"},[t._v("\n    "+t._s(t.client.documentType)+" "),t.client.documentName?s("span",[t._v("doc: "+t._s(t.client.documentName))]):t._e()]),s("div",{staticClass:"md-layout-item md-caption"},[t._v(" last seen: "),s("strong",[s("timeago",{attrs:{datetime:t.client.updatedAt}})],1)]),s("div",{staticClass:"md-layout-item md-caption"},[t.owner?s("span",[t._v(t._s(t.owner.name)+" "+t._s(t.owner.surname))]):t._e()])])}),a=[],c=(s("7514"),{name:"ClientCard",props:{client:Object},computed:{owner:function(){var t=this,e=this.$store.state.users.find(function(e){return e._id===t.client.owner});return e||this.$store.dispatch("getUser",{_id:this.client.owner}),e},icon:function(){return"sender"===this.client.role.toLowerCase()?"cloud_upload":"receiver"===this.client.role.toLowerCase()?"cloud_download":"hearing"}},data:function(){return{}},methods:{}}),o=c,d=(s("a79a"),s("2877")),u=Object(d["a"])(o,i,a,!1,null,"06cf13ef",null);u.options.__file="ClientCard.vue";var l=u.exports,m={name:"StreamDetailNetwork",components:{ClientCard:l},props:{stream:Object},watch:{stream:function(t,e){console.log("wathc",t),this.fetchData()}},computed:{canEdit:function(){return!!this.isOwner||-1!==this.stream.canWrite.indexOf(this.$store.state.user._id)},isOwner:function(){return this.stream.owner===this.$store.state.user._id},clients:function(){return this.$store.getters.streamClients(this.stream.streamId)}},methods:{fetchData:function(){this.$store.dispatch("getStreamClients",{streamId:this.stream.streamId})}},created:function(){this.fetchData()}},h=m,f=(s("aea9"),Object(d["a"])(h,r,n,!1,null,"68888742",null));f.options.__file="StreamDetailNetwork.vue";e["a"]=f.exports},"603d":function(t,e,s){},"6ec6":function(t,e,s){"use strict";var r=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("md-card",{staticClass:"md-elevation-0",attrs:{"md-with-hover":""}},[s("md-card-content",[s("md-field",{attrs:{"md-clearable":""}},[s("md-icon",[t._v("search")]),s("label",[t._v("Search for a user to add")]),s("md-input",{on:{input:t.startSearchUsers},model:{value:t.userSearch,callback:function(e){t.userSearch=e},expression:"userSearch"}})],1),s("md-progress-bar",{directives:[{name:"show",rawName:"v-show",value:t.searchInProgress,expression:"searchInProgress"}],attrs:{"md-mode":"indeterminate","md-diameter":20,"md-stroke":2}}),s("div",{staticClass:"md-layout xxxsearch-results xxxmd-elevation-1"},[t._l(t.foundUsers,function(e){return null!==t.userSearch&&t.foundUsers.length>0?s("md-chip",{key:e._id,staticClass:"md-primary",staticStyle:{margin:"3px"},attrs:{"md-clickable":""},on:{click:function(s){t.selectUser(e._id)}}},[t._v("\n      "+t._s(e.name)+" "+t._s(e.surname)+" "),e.company?s("span",{staticClass:"md-caption"},[t._v("("+t._s(e.company)+")")]):t._e()]):t._e()}),0!==t.foundUsers.length||""===t.userSearch||t.searchInProgress?t._e():s("div",{staticClass:"md-caption"},[t._v("\n      No users found. Try a different search!\n    ")])],2)],1)],1)},n=[],i=(s("20d6"),s("f7fe")),a=s.n(i),c=s("bc3a"),o=s.n(c),d={name:"UserSearch",props:{msg:String},data:function(){return{userSearch:"",foundUsers:[],searchInProgress:!1}},watch:{userSearch:function(t,e){""===t&&(this.foundUsers=[],this.searchInProgress=!1)}},methods:{selectUser:function(t){this.$emit("selected-user",t);var e=this.foundUsers.findIndex(function(e){return e._id===t});this.foundUsers.splice(e,1)},startSearchUsers:function(){this.searchInProgress=!0,this.searchUsers(this.userSearch)},searchUsers:a()(function(t){var e=this;""===t&&(this.foundUsers=[],this.searchInProgress=!1),t.length<3||o.a.post("/accounts/search",{searchString:t}).then(function(t){console.log(t),e.foundUsers=t.data.resources,t.data.resources.length>0&&e.$store.commit("ADD_USERS",t.data.resources),e.searchInProgress=!1}).catch(function(t){e.foundUsers=[],e.searchInProgress=!1})},1500)}},u=d,l=(s("4136"),s("2877")),m=Object(l["a"])(u,r,n,!1,null,"17f1dd98",null);m.options.__file="UserSearch.vue";e["a"]=m.exports},"798a":function(t,e,s){},8450:function(t,e,s){"use strict";var r=function(){var t=this,e=t.$createElement,s=t._self._c||e;return t.resource?s("md-card",{staticClass:"md-elevation-3"},[s("md-card-header",{staticClass:"bg-ghost-white"},[s("md-card-header-text",[s("div",{staticClass:"md-title"},[t._v("Description")]),s("div",{staticClass:"md-caption"},[t._v("What this "+t._s(t.isStream?"stream":"project")+" is about.")])])],1),s("md-card-content",[s("div",{directives:[{name:"show",rawName:"v-show",value:!t.editDescription,expression:"!editDescription"}]},[s("div",{domProps:{innerHTML:t._s(t.compiledDescription)}})]),s("div",{directives:[{name:"show",rawName:"v-show",value:t.editDescription,expression:"editDescription"}]},[t._v("\n      Supports "),s("a",{attrs:{target:"_blank",href:"https://en.wikipedia.org/wiki/Markdown#Example"}},[t._v("markdown.")]),s("md-field",[s("md-textarea",{model:{value:t.resource.description,callback:function(e){t.$set(t.resource,"description",e)},expression:"resource.description"}})],1)],1)]),s("md-card-actions",[!1===t.editDescription&&t.canEdit?s("md-button",{staticClass:"md-primary",nativeOn:{click:function(e){t.editDescription=!0}}},[t._v("Edit description")]):t._e(),!0===t.editDescription?s("md-button",{staticClass:"md-primary",nativeOn:{click:function(e){return t.updateDescription(e)}}},[t._v("Done")]):t._e()],1),t.resource.baseProperties?s("md-card-content",{staticClass:"md-caption"},[s("span",[s("strong",[t._v("Units:")]),t._v(" "+t._s(t.resource.baseProperties.units))]),t._v(";\n    "),s("span",[s("strong",[t._v("Tolerance:")]),t._v(" "+t._s(t.resource.baseProperties.tolerance))]),t._v(".\n  ")]):t._e()],1):t._e()},n=[],i=(s("cadf"),s("551c"),s("097d"),s("f7fe"),s("0e54")),a=s.n(i),c={name:"DetailDescription",props:{resource:Object},computed:{compiledDescription:function(){return a()(this.resource.description,{sanitize:!0})},canEdit:function(){return!!this.isOwner||-1!==this.resource.canWrite.indexOf(this.$store.state.user._id)},isOwner:function(){return this.resource.owner===this.$store.state.user._id},isStream:function(){return this.resource.hasOwnProperty("streamId")}},data:function(){return{editDescription:!1}},methods:{updateDescription:function(){this.editDescription=!1,this.isStream?this.$store.dispatch("updateStream",{streamId:this.resource.streamId,description:this.resource.description}):this.$store.dispatch("updateProject",{_id:this.resource._id,description:this.resource.description})}}},o=c,d=(s("a345"),s("2877")),u=Object(d["a"])(o,r,n,!1,null,"36a299f6",null);u.options.__file="DetailDescription.vue";e["a"]=u.exports},"8b97":function(t,e,s){var r=s("d3f4"),n=s("cb7c"),i=function(t,e){if(n(t),!r(e)&&null!==e)throw TypeError(e+": can't set as prototype!")};t.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(t,e,r){try{r=s("9b43")(Function.call,s("11e9").f(Object.prototype,"__proto__").set,2),r(t,[]),e=!(t instanceof Array)}catch(n){e=!0}return function(t,s){return i(t,s),e?t.__proto__=s:r(t,s),t}}({},!1):void 0),check:i}},"98cf":function(t,e,s){"use strict";var r=s("497e"),n=s.n(r);n.a},a01d:function(t,e,s){},a345:function(t,e,s){"use strict";var r=s("f59d"),n=s.n(r);n.a},a41d:function(t,e,s){"use strict";var r=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("md-card",{staticClass:"md-elevation-3"},[s("md-card-content",[s("div",{staticClass:"md-title"},[t._v("Comments")]),s("md-divider",{attrs:{"md-inset":""}}),s("p",[t._v("TODO")])],1)],1)},n=[],i=(s("f7fe"),{name:"StreamDetailUserComments",props:{stream:Object},computed:{canEdit:function(){return!!this.isOwner||-1!==this.stream.canWrite.indexOf(this.$store.state.user._id)},isOwner:function(){return this.stream.owner===this.$store.state.user._id}},methods:{}}),a=i,c=(s("e84e"),s("2877")),o=Object(c["a"])(a,r,n,!1,null,"43af536a",null);o.options.__file="StreamDetailComments.vue";e["a"]=o.exports},a79a:function(t,e,s){"use strict";var r=s("0e47"),n=s.n(r);n.a},aea9:function(t,e,s){"use strict";var r=s("a01d"),n=s.n(r);n.a},af88:function(t,e,s){"use strict";var r=s("0e78"),n=s.n(r);n.a},b39a:function(t,e,s){var r=s("d3f4");t.exports=function(t,e){if(!r(t)||t._t!==e)throw TypeError("Incompatible receiver, "+e+" required!");return t}},bdd8:function(t,e,s){"use strict";var r=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("md-card",{staticClass:"md-elevation-0"},[s("md-card-content",[s("h1",{staticClass:"md-display-1"},[s("router-link",{attrs:{to:"/streams"}},[t._v("Streams")]),t._v(" /\n      "),t.canEdit&&t.stream.onlineEditable?s("editable-span",{attrs:{text:t.stream.name},on:{update:t.updateName}}):s("span",[t._v(t._s(t.stream.name))])],1),s("p",[s("span",[s("md-chip",{},[t._v("streamId: "),s("strong",{staticStyle:{"user-select":"all",cursor:"pointer"}},[t._v(t._s(t.stream.streamId))])])],1),t._v(" "),s("br"),t._v(" "),s("br"),t.streamProjects.length>0?s("span",[t._v("projects:\n      "),t._l(t.streamProjects,function(e,r){return s("md-chip",{staticClass:"md-primary",attrs:{"md-clickable":""}},[s("router-link",{staticStyle:{color:"white !important"},attrs:{to:"/projects/"+e._id}},[t._v(t._s(e.name))]),t._v(" \n      ")],1)})],2):t._e()]),s("md-divider"),s("md-chips",{staticClass:"stream-chips",attrs:{"md-placeholder":"add tags","md-disabled":"!canEdit"},on:{input:t.updateTags},model:{value:t.stream.tags,callback:function(e){t.$set(t.stream,"tags",e)},expression:"stream.tags"}})],1)],1)},n=[],i=(s("cadf"),s("551c"),s("097d"),s("f7fe")),a=s.n(i),c={name:"StreamDetailTitle",props:{stream:Object},computed:{canEdit:function(){return!!this.isOwner||-1!==this.stream.canWrite.indexOf(this.$store.state.user._id)},isOwner:function(){return this.stream.owner===this.$store.state.user._id},streamProjects:function(){var t=this;return this.$store.state.projects.filter(function(e){return-1!==e.streams.indexOf(t.stream.streamId)})}},data:function(){return{}},methods:{updateTags:a()(function(t){this.$store.dispatch("updateStream",{streamId:this.stream.streamId,tags:this.stream.tags})},1e3),updateName:function(t){this.$store.dispatch("updateStream",{streamId:this.stream.streamId,name:t.text})}},mounted:function(){}},o=c,d=(s("d9e5"),s("2877")),u=Object(d["a"])(o,r,n,!1,null,"b82a3800",null);u.options.__file="StreamDetailTitle.vue";e["a"]=u.exports},c26b:function(t,e,s){"use strict";var r=s("86cc").f,n=s("2aeb"),i=s("dcbc"),a=s("9b43"),c=s("f605"),o=s("4a59"),d=s("01f9"),u=s("d53b"),l=s("7a56"),m=s("9e1e"),h=s("67ab").fastKey,f=s("b39a"),p=m?"_s":"size",v=function(t,e){var s,r=h(e);if("F"!==r)return t._i[r];for(s=t._f;s;s=s.n)if(s.k==e)return s};t.exports={getConstructor:function(t,e,s,d){var u=t(function(t,r){c(t,u,e,"_i"),t._t=e,t._i=n(null),t._f=void 0,t._l=void 0,t[p]=0,void 0!=r&&o(r,s,t[d],t)});return i(u.prototype,{clear:function(){for(var t=f(this,e),s=t._i,r=t._f;r;r=r.n)r.r=!0,r.p&&(r.p=r.p.n=void 0),delete s[r.i];t._f=t._l=void 0,t[p]=0},delete:function(t){var s=f(this,e),r=v(s,t);if(r){var n=r.n,i=r.p;delete s._i[r.i],r.r=!0,i&&(i.n=n),n&&(n.p=i),s._f==r&&(s._f=n),s._l==r&&(s._l=i),s[p]--}return!!r},forEach:function(t){f(this,e);var s,r=a(t,arguments.length>1?arguments[1]:void 0,3);while(s=s?s.n:this._f){r(s.v,s.k,this);while(s&&s.r)s=s.p}},has:function(t){return!!v(f(this,e),t)}}),m&&r(u.prototype,"size",{get:function(){return f(this,e)[p]}}),u},def:function(t,e,s){var r,n,i=v(t,e);return i?i.v=s:(t._l=i={i:n=h(e,!0),k:e,v:s,p:r=t._l,n:void 0,r:!1},t._f||(t._f=i),r&&(r.n=i),t[p]++,"F"!==n&&(t._i[n]=i)),t},getEntry:v,setStrong:function(t,e,s){d(t,e,function(t,s){this._t=f(t,e),this._k=s,this._l=void 0},function(){var t=this,e=t._k,s=t._l;while(s&&s.r)s=s.p;return t._t&&(t._l=s=s?s.n:t._t._f)?u(0,"keys"==e?s.k:"values"==e?s.v:[s.k,s.v]):(t._t=void 0,u(1))},s?"entries":"values",!s,!0),l(e)}}},c542:function(t,e,s){"use strict";var r=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("md-card",{staticClass:"md-elevation-3",attrs:{"md-with-hover":""}},[t.stream.parent?s("md-card",{staticClass:"md-elevation-0"},[s("md-card-content",[s("div",{staticClass:"md-title"},[t._v("Parent")])])],1):t._e(),t.stream.parent?s("stream-card-small",{attrs:{"stream-id":t.stream.parent,removable:!1}}):t._e(),s("md-card",{staticClass:"md-elevation-0"},[s("md-card-header",{staticClass:"bg-ghost-white"},[s("md-card-header-text",[s("div",{staticClass:"md-title"},[t._v("Children "),s("span",{staticClass:"md-caption"},[t._v("("+t._s(t.stream.children.length)+")")])])])],1)],1),0===t.stream.children.length?s("md-card",{staticClass:"md-elevation-0"},[s("md-card-content",[s("div",{staticClass:"md-caption"},[t._v("This stream has no children.")])])],1):t._e(),t._l(t.paginatedKids,function(t){return s("stream-card-small",{key:t,attrs:{"stream-id":t,removable:!1}})}),s("br"),s("div",{staticClass:"text-center",staticStyle:{"padding-bottom":"5px"}},[s("md-button",{staticClass:"md-raised md-primary",attrs:{disabled:t.paginatedKids.length===t.stream.children.length},nativeOn:{click:function(e){t.endIndex+=5}}},[t._v("\n      Show More ("+t._s(t.paginatedKids.length)+" / "+t._s(t.stream.children.length)+")\n    ")])],1)],2)},n=[],i=(s("f7fe"),s("adc7")),a={name:"StreamDetailHistory",components:{StreamCardSmall:i["a"]},props:{stream:Object},computed:{paginatedKids:function(){return this.stream.children.reverse().slice(this.startIndex,this.endIndex)},canEdit:function(){return!!this.isOwner||-1!==this.stream.canWrite.indexOf(this.$store.state.user._id)},isOwner:function(){return this.stream.owner===this.$store.state.user._id}},data:function(){return{startIndex:0,itemsPerPage:5,endIndex:5}},methods:{}},c=a,o=(s("98cf"),s("2877")),d=Object(o["a"])(c,r,n,!1,null,"0b8cffa6",null);d.options.__file="StreamDetailHistory.vue";e["a"]=d.exports},d49c:function(t,e,s){"use strict";var r=s("42b5"),n=s.n(r);n.a},d9e5:function(t,e,s){"use strict";var r=s("798a"),n=s.n(r);n.a},e0b8:function(t,e,s){"use strict";var r=s("7726"),n=s("5ca1"),i=s("2aba"),a=s("dcbc"),c=s("67ab"),o=s("4a59"),d=s("f605"),u=s("d3f4"),l=s("79e5"),m=s("5cc5"),h=s("7f20"),f=s("5dbc");t.exports=function(t,e,s,p,v,_){var b=r[t],g=b,w=v?"set":"add",y=g&&g.prototype,C={},O=function(t){var e=y[t];i(y,t,"delete"==t?function(t){return!(_&&!u(t))&&e.call(this,0===t?0:t)}:"has"==t?function(t){return!(_&&!u(t))&&e.call(this,0===t?0:t)}:"get"==t?function(t){return _&&!u(t)?void 0:e.call(this,0===t?0:t)}:"add"==t?function(t){return e.call(this,0===t?0:t),this}:function(t,s){return e.call(this,0===t?0:t,s),this})};if("function"==typeof g&&(_||y.forEach&&!l(function(){(new g).entries().next()}))){var x=new g,S=x[w](_?{}:-0,1)!=x,$=l(function(){x.has(1)}),P=m(function(t){new g(t)}),D=!_&&l(function(){var t=new g,e=5;while(e--)t[w](e,e);return!t.has(-0)});P||(g=e(function(e,s){d(e,g,t);var r=f(new b,e,g);return void 0!=s&&o(s,v,r[w],r),r}),g.prototype=y,y.constructor=g),($||D)&&(O("delete"),O("has"),v&&O("get")),(D||S)&&O(w),_&&y.clear&&delete y.clear}else g=p.getConstructor(e,t,v,w),a(g.prototype,s),c.NEED=!0;return h(g,t),C[t]=g,n(n.G+n.W+n.F*(g!=b),C),_||p.setStrong(g,t,v),g}},e84e:function(t,e,s){"use strict";var r=s("2d18"),n=s.n(r);n.a},f59d:function(t,e,s){},fa20:function(t,e,s){"use strict";var r=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("md-card",{staticClass:"md-elevation-3",attrs:{"md-with-hover":""}},[s("md-card-content",{staticClass:"bg-ghost-white"},[s("div",{staticClass:"md-layout md-alignment-center-center"},[s("div",{staticClass:"md-layout-item md-title md-size-70"},[t._v("Link Sharing")]),s("div",{staticClass:"md-layout-item md-title md-size-30 text-right"},[s("md-button",{class:{"md-raised":!0,"md-primary":!t.stream.private},attrs:{disabled:!t.canEdit},nativeOn:{click:function(e){return t.changeLinkSharing(e)}}},[t._v("\n          "+t._s(t.stream.private?"OFF":"ON")+"\n        ")])],1),s("div",{staticClass:"md-layout-item md-size-100 md-caption"},[t._v("\n        "+t._s(t.stream.private?"Private resource. Only people with read or write persmissions can access it.":"Public resource. Anyone with the id can access it.")+"\n        "),t.isOwner?s("span",{staticClass:"md-layout-item md-size-100 md-caption"},[t._v("\n        You own this stream.\n      ")]):s("span",{staticClass:"md-layout-item md-size-100 md-caption"},[t._v("\n        This stream was shared with you by "),s("strong",[t._v(t._s(t.streamOwner)+".")])])])])]),s("md-card-content",{staticClass:"bg-ghost-white"},[s("div",{staticClass:"md-layout"},[s("div",{staticClass:"md-layout-item md-size-100",staticStyle:{"margin-top":"20px"}},[s("div",{staticClass:"md-title"},[t._v("Permissions")]),s("p",{staticClass:"md-caption"},[t._v("Some users might be disabled as their permissions are set through projects.")])])])]),s("md-card-content",[s("div",{staticClass:"md-layout"},[s("div",{staticClass:"md-layout-item md-size-100",staticStyle:{"margin-top":"0px"}},[t.canEdit?s("user-search",{on:{"selected-user":t.addUserToWrite}}):t._e(),s("permission-table",{attrs:{resource:t.stream,"disabled-users":t.usersFromProjects},on:{"update-table":t.updatePerms}})],1)])])],1)},n=[],i=(s("ac6a"),s("5df3"),s("4f7f"),s("2909")),a=(s("7514"),s("7f7f"),s("f7fe"),s("c36e")),c=s.n(a),o=(s("bc3a"),s("6ec6")),d=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("div",{},[0===t.allUsersPop.length?s("div",[t._v("\n      No sharing buddies so far!\n    ")]):t._e(),t._l(t.allUsersPop,function(e){return e?s("div",{staticClass:"md-layout md-alignment-center-left user"},[s("div",{staticClass:"md-layout-item md-size-10"},[s("md-avatar",{staticClass:"md-avatar-icon md-small",style:{background:t.getHexFromString(e.name)}},[t._v(t._s(e.name.substring(0,1).toUpperCase()))])],1),s("div",{staticClass:"md-layout-item md-size-40"},[t._v("\n        "+t._s(e.name)+" "+t._s(e.surname)+" "),e.company?s("span",{staticClass:"md-caption"},[t._v("("+t._s(e.company)+")")]):t._e()]),s("div",{staticClass:"md-layout-item text-right"},[s("md-button",{class:{"md-dense md-raised":!0,"md-primary":t.hasWritePermission(e._id)},attrs:{disabled:e.surname.includes("(that is you!)")||t.globalDisabled||t.isDisabled(e._id)},nativeOn:{click:function(s){t.changePermission(e._id)}}},[t._v(t._s(t.hasWritePermission(e._id)?"write":"read"))]),s("md-button",{staticClass:"md-dense-xxx md-icon-button md-accent",attrs:{disabled:e.surname.includes("(that is you!)")||t.globalDisabled||t.isDisabled(e._id)},nativeOn:{click:function(s){t.removeUser(e._id)}}},[s("md-icon",[t._v("delete")])],1)],1)]):t._e()})],2)])},u=[],l=(s("55dd"),s("13bb")),m=s.n(l),h={name:"PermissionTable",props:{resource:Object,globalDisabled:{type:Boolean,default:!1},disabledUsers:{type:Array,default:function(){return[]}}},computed:{canRead:function(){return this.resource.canRead},canWrite:function(){return this.resource.canWrite},allUsers:function(){return m()(this.canRead,this.canWrite)},allUsersPop:function(){var t=this;return 0===this.allUsers.length?[]:this.allUsers.map(function(e){var s=t.$store.state.users.find(function(t){return t._id===e});return s||t.$store.dispatch("getUser",{_id:e}),s}).sort(function(t,e){return t.name>e.name?1:-1})}},data:function(){return{}},methods:{isDisabled:function(t){return this.disabledUsers.indexOf(t)>-1},hasWritePermission:function(t){return this.canWrite.indexOf(t)>-1},changePermission:function(t){var e=[],s=[],r=this.canWrite.indexOf(t);r>-1?(e=this.canWrite.filter(function(e){return e!==t}),s=c()(Object(i["a"])(this.canRead).concat([t]))):(s=this.canRead.filter(function(e){return e!==t}),e=c()(Object(i["a"])(this.canWrite).concat([t]))),this.$emit("update-table",{canRead:s,canWrite:e})},removeUser:function(t){var e=this.canWrite.filter(function(e){return e!==t}),s=this.canRead.filter(function(e){return e!==t});this.$emit("remove-user",{userId:t}),this.$emit("update-table",{canRead:s,canWrite:e})}},mounted:function(){}},f=h,p=(s("af88"),s("2877")),v=Object(p["a"])(f,d,u,!1,null,"2fa5e521",null);v.options.__file="PermissionTable.vue";var _=v.exports,b={name:"StreamDetailUserPerms",components:{UserSearch:o["a"],PermissionTable:_},props:{stream:Object},computed:{streamOwner:function(){var t=this;if(this.isOwner)return"".concat(this.$store.state.user.name," ").concat(this.$store.state.user.surname);var e=this.$store.state.users.find(function(e){return e._id===t.stream.owner});return e?"".concat(e.name," ").concat(e.surname," ").concat(e.company?"("+e.company+")":""):"(loading)"},canEdit:function(){return!!this.isOwner||-1!==this.stream.canWrite.indexOf(this.$store.state.user._id)},isOwner:function(){return this.stream.owner===this.$store.state.user._id},usersFromProjects:function(){var t,e,s=this,r=this.$store.state.projects.filter(function(t){return-1!==t.streams.indexOf(s.stream.streamId)}),n=(t=Array.prototype).concat.apply(t,Object(i["a"])(r.map(function(t){return t.permissions.canRead}))),a=(e=Array.prototype).concat.apply(e,Object(i["a"])(r.map(function(t){return t.permissions.canWrite})));return Object(i["a"])(new Set(Object(i["a"])(a).concat(Object(i["a"])(n))))}},data:function(){return{userSearch:"",foundUsers:[],searchInProgress:!1}},methods:{changeLinkSharing:function(){this.$store.dispatch("updateStream",{streamId:this.stream.streamId,private:!this.stream.private})},addUserToWrite:function(t){var e=c()(Object(i["a"])(this.stream.canWrite).concat([t]));this.$store.dispatch("updateStream",{streamId:this.stream.streamId,canWrite:e})},updatePerms:function(t){var e=t.canRead,s=t.canWrite;this.$store.dispatch("updateStream",{streamId:this.stream.streamId,canRead:e,canWrite:s})}}},g=b,w=(s("d49c"),Object(p["a"])(g,r,n,!1,null,"5f99d6f9",null));w.options.__file="StreamDetailUserPerms.vue";e["a"]=w.exports}}]);
//# sourceMappingURL=chunk-d776b2e4.ba44671c.js.map