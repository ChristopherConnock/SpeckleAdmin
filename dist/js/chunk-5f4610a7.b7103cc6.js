(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5f4610a7"],{"89e0":function(e,t,s){"use strict";var a=s("fe21"),i=s.n(a);i.a},b23c:function(e,t,s){},b3bf:function(e,t,s){"use strict";var a=s("b23c"),i=s.n(a);i.a},cf8c:function(e,t,s){"use strict";s.r(t);var a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return 0===e.streams.length?s("md-empty-state",{attrs:{"md-icon":"import_export","md-label":"","md-description":"You don't have any streams yet."}}):s("div",{staticClass:"md-layout"},[s("md-card",{staticClass:"md-primary-xx main-toolbar md-elevation-3"},[s("md-card-content",{staticClass:"md-layout md-alignment-center-space-between"},[s("div",{staticClass:"md-layout-item md-size-95"},[s("md-field",{attrs:{"md-clearable":""}},[s("md-icon",[e._v("search")]),s("label",[e._v("name:box id:xxx private:true")]),s("md-input",{attrs:{spellcheck:"false"},on:{input:e.updateSearch}})],1)],1),s("div",{staticClass:"md-layout-item md-size-5 text-right"},[s("md-button",{staticClass:"md-icon-button md-raised md-primary",nativeOn:{click:function(t){return e.createStream(t)}}},[s("md-icon",[e._v("add")])],1)],1),e.selectedStreams.length>0?s("div",{staticClass:"md-layout-item md-size-100",staticStyle:{"margin-top":"10px"}},[s("md-button",{staticClass:"md-raised md-dense md-primary",nativeOn:{click:function(t){return e.clearSelection(t)}}},[e._v("clear selection ("+e._s(e.selectedStreams.length)+")")]),s("md-button",{staticClass:"md-raised-xx md-dense md-accent",nativeOn:{click:function(t){return e.deleteStreams(t)}}},[e._v("delete")]),s("md-button",{staticClass:"md-raised md-dense",nativeOn:{click:function(t){return e.togglePermissions(t)}}},[e._v("Make "+e._s(e.defaultPermission))]),s("md-button",{staticClass:"md-raised md-dense",nativeOn:{click:function(t){return e.createProjectFromSelection(t)}}},[e._v("Create Project")])],1):e._e()])],1),e._l(e.paginatedStreams,function(t){return s("div",{key:t._id,staticClass:"md-layout-item md-small-size-100 md-medium-size-50 md-large-size-33 md-xlarge-size-33"},[s("stream-card",{attrs:{stream:t},on:{selected:e.selectThis,deleted:e.clearSelection}})],1)}),s("div",{staticClass:"md-layout-item md-size-100"},[s("md-card",{staticClass:"md-elevation-0"},[s("md-button",{staticClass:"md-raised btn-no-margin md-primary",attrs:{disabled:e.paginatedStreams.length===e.filteredStreams.length},nativeOn:{click:function(t){e.endIndex+=12}}},[e._v("\n        Show More ("+e._s(e.paginatedStreams.length)+" / "+e._s(e.filteredStreams.length)+")\n      ")])],1)],1)],2)},i=[],r=(s("20d6"),s("6762"),s("2fdb"),s("28a5"),s("ac6a"),s("cadf"),s("551c"),s("097d"),s("f7fe")),n=s.n(r),c=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("md-card",{class:{"stream-card":!0,selected:e.selected},attrs:{"md-with-hover":""}},[s("md-card-header",{on:{click:function(t){e.selected=!e.selected}}},[s("md-card-header-text",[s("router-link",{attrs:{to:"/streams/"+e.stream.streamId}},[s("div",{staticClass:"md-title"},[e._v(e._s(e.stream.name))]),s("div",{staticClass:"md-subhead",attrs:{stlye:"user-select:all;"}},[e._v(e._s(e.stream.streamId))]),s("div",{staticClass:"md-caption",domProps:{innerHTML:e._s(e.compiledDescription)}})])],1),s("md-checkbox",{attrs:{value:"1"},nativeOn:{click:function(t){e.$emit("selected",e.stream)}},model:{value:e.selected,callback:function(t){e.selected=t},expression:"selected"}})],1),s("md-card-content",[s("div",{staticClass:"md-layout md-alignment-center-center"},[s("div",{staticClass:"md-layout-item md-size-10"},[s("md-icon",[e._v("access_time")])],1),s("div",{staticClass:"md-layout-item md-caption"},[s("strong",[s("timeago",{attrs:{datetime:e.stream.updatedAt}})],1)]),s("div",{staticClass:"md-layout-item md-size-10"},[s("md-icon",[e._v("create")])],1),s("div",{staticClass:"md-layout-item md-caption"},[e._v("\n        "+e._s(e.createdAt)+"\n      ")]),s("div",{staticClass:"md-layout-item md-caption md-size-20"},[s("md-icon",[e._v(e._s(e.stream.private?"https":"public"))]),e._v("\n        "+e._s(e.stream.private?"private":"public")+"\n      ")],1),s("div",{staticClass:"md-layout-item md-size-100"},[s("md-chips",{staticClass:"stream-chips",attrs:{"md-placeholder":"add tags"},on:{input:e.updateTags},model:{value:e.stream.tags,callback:function(t){e.$set(e.stream,"tags",t)},expression:"stream.tags"}})],1)])]),s("md-card-actions",[s("md-button",{directives:[{name:"show",rawName:"v-show",value:e.isOwner,expression:"isOwner"}],staticClass:"md-accent",nativeOn:{click:function(t){return e.deleteStream(t)}}},[e._v("Delete")]),s("md-button",{staticClass:"md-raised-xxx",attrs:{to:"/streams/"+e.stream.streamId}},[e._v("Details")])],1)],1)},d=[],m=s("0e54"),l=s.n(m),o={name:"StreamCard",props:{stream:Object},watch:{selected:function(){this.$emit("selected",this.stream)}},computed:{createdAt:function(){var e=new Date(this.stream.createdAt);return e.toLocaleString("en",{year:"numeric",month:"long",day:"numeric"})},compiledDescription:function(){return l()(this.stream.description.substring(0,220)+" ...",{sanitize:!0})},canEdit:function(){return!!this.isOwner||-1!==this.stream.canWrite.indexOf(this.$store.state.user._id)},isOwner:function(){return this.stream.owner===this.$store.state.user._id}},data:function(){return{selected:!1}},methods:{deleteStream:function(){this.$store.dispatch("updateStream",{streamId:this.stream.streamId,deleted:!0}),this.$emit("deleted")},updateTags:n()(function(e){this.$store.dispatch("updateStream",{streamId:this.stream.streamId,tags:this.stream.tags})},1e3)},mounted:function(){var e=this;bus.$on("unselect-all",function(){e.selected=!1})}},u=o,h=(s("89e0"),s("2877")),f=Object(h["a"])(u,c,d,!1,null,"2c8f7d66",null);f.options.__file="StreamCard.vue";var p=f.exports,v={name:"StreamsView",components:{StreamCard:p},computed:{streams:function(){return this.$store.state.streams.filter(function(e){return null==e.parent&&!1===e.deleted})},filteredStreams:function(){return this.$store.getters.filteredStreams(this.filters)},paginatedStreams:function(){return this.filteredStreams.slice(this.startIndex,this.endIndex)}},data:function(){return{startIndex:0,itemsPerPage:12,endIndex:12,selectedStreams:[],searchfilter:"",filters:[],defaultPermission:"private"}},watch:{selectedStreams:function(){var e=0,t=0;this.selectedStreams.forEach(function(s){s.private?e++:t++}),this.defaultPermission=e>t?"public":"private"}},methods:{createStream:function(){var e=this;this.$store.dispatch("createStream",{name:"A New Speckle Stream",onlineEditable:!0}).then(function(t){e.$router.push("/streams/".concat(t.streamId))}).catch(function(e){console.error(e)})},createProjectFromSelection:function(){var e=this;this.$store.dispatch("createProject",{name:"Speckle Project",streams:this.selectedStreams.map(function(e){return e.streamId})}).then(function(t){e.clearSelection(),e.$router.push("/projects/".concat(t._id))})},togglePermissions:function(){var e=this;this.selectedStreams.forEach(function(t){e.$store.dispatch("updateStream",{streamId:t.streamId,private:"private"===e.defaultPermission})}),this.defaultPermission="private"===this.defaultPermission?"public":"private"},deleteStreams:function(){var e=this;this.selectedStreams.forEach(function(t){e.$store.dispatch("updateStream",{streamId:t.streamId,deleted:!0})}),this.clearSelection()},updateSearch:n()(function(e){this.searchfilter=e;try{var t=this.searchfilter.split(" ").map(function(e){return e.includes(":")?{key:e.split(":")[0],value:e.split(":")[1]}:e.includes("public")||e.includes("private")||e.includes("mine")||e.includes("shared")?{key:e,value:null}:{key:"name",value:e}});this.filters=t}catch(s){this.filters=[{key:"name",value:e}]}},1e3),selectThis:function(e){var t=this.selectedStreams.findIndex(function(t){return t.streamId===e.streamId});-1===t?this.selectedStreams.unshift(e):this.selectedStreams.splice(t,1)},clearSelection:function(){this.defaultPermission="private",bus.$emit("unselect-all")},checkSelection:function(){this.selectedStreams=this.selectedStreams.filter(function(e){return!e.deleted})}},created:function(){}},S=v,_=(s("b3bf"),Object(h["a"])(S,a,i,!1,null,"35d7f298",null));_.options.__file="Streams.vue";t["default"]=_.exports},fe21:function(e,t,s){}}]);
//# sourceMappingURL=chunk-5f4610a7.b7103cc6.js.map